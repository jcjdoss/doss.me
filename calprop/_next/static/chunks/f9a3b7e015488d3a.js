(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79001,e=>{"use strict";var t=e.i(59834),r=e.i(22513);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>i,"CardHeader",()=>s,"CardTitle",()=>n])},93749,e=>{"use strict";var t=e.i(59834),r=e.i(80612),a=e.i(22513);function s({className:e}){return(0,t.jsxs)("div",{className:(0,a.cn)("rounded-xl border bg-card p-6 shadow-sm space-y-4",e),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Skeleton,{className:"h-4 w-4 rounded"}),(0,t.jsx)(r.Skeleton,{className:"h-4 w-24"})]}),(0,t.jsx)(r.Skeleton,{className:"h-8 w-20"}),(0,t.jsx)(r.Skeleton,{className:"h-3 w-32"})]})}function n({className:e}){return(0,t.jsxs)("div",{className:(0,a.cn)("space-y-6",e),children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(r.Skeleton,{className:"h-8 w-64"}),(0,t.jsx)(r.Skeleton,{className:"h-4 w-40"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsx)(s,{}),(0,t.jsx)(s,{})]})]})}e.s(["CardSkeleton",()=>s,"DetailSkeleton",()=>n])},43970,83685,e=>{"use strict";var t=e.i(94325);let r=(0,t.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],43970);let a=(0,t.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],83685)},31906,e=>{"use strict";var t=e.i(59834),r=e.i(22513),a=e.i(44261);function s({icon:e,title:s,description:n,action:i,className:o}){return(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center py-12 text-center",o),children:[e&&(0,t.jsx)("div",{className:"rounded-full bg-muted p-4 mb-4",children:(0,t.jsx)(e,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"text-base font-semibold",children:s}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground max-w-sm",children:n}),i&&(0,t.jsx)(a.Button,{onClick:i.onClick,className:"mt-4",size:"sm",children:i.label})]})}e.s(["EmptyState",()=>s])},41868,e=>{"use strict";var t=e.i(59834),r=e.i(22513);function a({className:e,type:a,...s}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>a])},71579,e=>{"use strict";function t(e,[t,r]){return Math.min(r,Math.max(t,e))}e.s(["clamp",()=>t])},38798,e=>{"use strict";var t=e.i(42656);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},45152,e=>{"use strict";var t=e.i(59834),r=e.i(22513);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",e),...a})})}function s({className:e,...a}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",e),...a})}function n({className:e,...a}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",e),...a})}function i({className:e,...a}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function o({className:e,...a}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function l({className:e,...a}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}e.s(["Table",()=>a,"TableBody",()=>n,"TableCell",()=>l,"TableHead",()=>o,"TableHeader",()=>s,"TableRow",()=>i])},12061,e=>{"use strict";var t=e.i(42828),r=e.i(42656),a=e.i(93312),s=e.i(77456),n=e.i(54368),i=e.i(12674),o=class extends n.Subscribable{#e;#t=void 0;#r;#a;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#n(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#n()}mutate(e,t){return this.#a=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#s(){let e=this.#r?.state??(0,a.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#n(e){s.notifyManager.batch(()=>{if(this.#a&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#a.onSuccess?.(e.data,t,r,a)}catch(e){Promise.reject(e)}try{this.#a.onSettled?.(e.data,null,t,r,a)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#a.onError?.(e.error,t,r,a)}catch(e){Promise.reject(e)}try{this.#a.onSettled?.(void 0,e.error,t,r,a)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},l=e.i(73252);function d(e,t){let a=(0,l.useQueryClient)(t),[n]=r.useState(()=>new o(a,e));r.useEffect(()=>{n.setOptions(e)},[n,e]);let d=r.useSyncExternalStore(r.useCallback(e=>n.subscribe(s.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=r.useCallback((e,t)=>{n.mutate(e,t).catch(i.noop)},[n]);if(d.error&&(0,i.shouldThrowError)(n.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:c,mutateAsync:d.mutate}}var c=e.i(85398);function u(e){return(0,t.useQuery)({queryKey:["incidents",e],queryFn:()=>(0,c.apiFetch)("/v1/calamity/incidents",{params:{status:e}})})}function m(e){return(0,t.useQuery)({queryKey:["incident",e],queryFn:()=>(0,c.apiFetch)(`/v1/calamity/incidents/${e}`),enabled:!!e})}function p(e){return(0,t.useQuery)({queryKey:["affected-parcels",e],queryFn:()=>(0,c.apiFetch)(`/v1/calamity/incidents/${e.incidentId}/parcels`,{params:{page:e.page||1,pageSize:e.pageSize||20,damageLevel:e.damageLevel}}),enabled:!!e.incidentId})}function h(){let e=(0,l.useQueryClient)();return d({mutationFn:({incidentId:e,parcelId:t,survey:r})=>(0,c.apiFetch)(`/v1/calamity/incidents/${e}/parcels/${t}/survey`,{method:"POST",body:r}),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["affected-parcels"]}),e.invalidateQueries({queryKey:["incident",r.incidentId]})}})}function f(){let e=(0,l.useQueryClient)();return d({mutationFn:({incidentId:e,parcelId:t})=>(0,c.apiFetch)(`/v1/calamity/incidents/${e}/parcels/${t}/reassess`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["affected-parcels"]})}})}e.s(["useAffectedParcels",()=>p,"useComputeReassessment",()=>f,"useIncident",()=>m,"useIncidents",()=>u,"useSubmitSurvey",()=>h],12061)},36941,e=>{"use strict";let t=(0,e.i(94325).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],36941)},69833,e=>{"use strict";let t=(0,e.i(94325).default)("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]);e.s(["FileSearch",()=>t],69833)},48846,e=>{"use strict";let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2});let r=new Intl.NumberFormat("en-US");function a(e){return t.format(e)}function s(e){return r.format(e)}function n(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function i(e){let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/1e3),a=Math.floor(r/60),s=Math.floor(a/60),i=Math.floor(s/24);return r<60?"just now":a<60?1===a?"1 min ago":a+" min ago":s<24?1===s?"1 hr ago":s+" hrs ago":i<7?1===i?"1 day ago":i+" days ago":n(e)}function o(e){return e}function l(e){return e<1?e.toFixed(2)+" ac":r.format(e)+" ac"}new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1}),e.s(["formatAcreage",()=>l,"formatApn",()=>o,"formatCurrency",()=>a,"formatDate",()=>n,"formatNumber",()=>s,"formatRelativeTime",()=>i])},17896,50875,e=>{"use strict";var t=e.i(59834),r=e.i(71908),a=e.i(22513);let s={active:"bg-success/15 text-success border-success/20",inactive:"bg-muted text-muted-foreground border-muted",pending:"bg-warning/15 text-warning border-warning/20",archived:"bg-muted text-muted-foreground border-muted",monitoring:"bg-info/15 text-info border-info/20",closed:"bg-muted text-muted-foreground border-muted"};function n({status:e,className:n}){let i=s[e.toLowerCase()]||"bg-muted text-muted-foreground border-muted";return(0,t.jsxs)(r.Badge,{variant:"outline",className:(0,a.cn)("font-medium capitalize text-[11px] px-2 py-0.5",i,n),children:[(0,t.jsx)("span",{className:"mr-1.5 inline-block h-1.5 w-1.5 rounded-full bg-current"}),e.replace(/_/g," ")]})}e.s(["damageLevelColors",0,{destroyed:"bg-destructive/15 text-destructive border-destructive/20",major:"bg-[oklch(0.7_0.15_40)]/15 text-[oklch(0.55_0.18_40)] border-[oklch(0.7_0.15_40)]/20",minor:"bg-warning/15 text-warning border-warning/20",affected:"bg-info/15 text-info border-info/20",inaccessible:"bg-muted text-muted-foreground border-muted",none:"bg-success/15 text-success border-success/20"},"incidentTypeLabels",0,{wildfire:"Wildfire",flood:"Flood",earthquake:"Earthquake",mudslide:"Mudslide",hurricane:"Hurricane",tornado:"Tornado",other:"Other"},"statusColors",0,s],50875),e.s(["StatusBadge",()=>n],17896)},74182,e=>{"use strict";let t=(0,e.i(94325).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],74182)},75482,e=>{"use strict";let t=(0,e.i(94325).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],75482)},25933,e=>{"use strict";var t=e.i(59834),r=e.i(46472),a=e.i(94325);let s=(0,a.default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),n=(0,a.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),i=(0,a.default)("mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),o=(0,a.default)("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),l=(0,a.default)("tornado",[["path",{d:"M21 4H3",key:"1hwok0"}],["path",{d:"M18 8H6",key:"41n648"}],["path",{d:"M19 12H9",key:"1g4lpz"}],["path",{d:"M16 16h-6",key:"1j5d54"}],["path",{d:"M11 20H9",key:"39obr8"}]]);var d=e.i(74182),c=e.i(22513);let u={wildfire:r.Flame,flood:s,earthquake:n,mudslide:i,hurricane:o,tornado:l},m={wildfire:"bg-red-500/10 text-red-600 dark:text-red-400",flood:"bg-blue-500/10 text-blue-600 dark:text-blue-400",earthquake:"bg-amber-500/10 text-amber-600 dark:text-amber-400",mudslide:"bg-orange-500/10 text-orange-600 dark:text-orange-400",hurricane:"bg-purple-500/10 text-purple-600 dark:text-purple-400",tornado:"bg-gray-500/10 text-gray-600 dark:text-gray-400"};function p({type:e,className:r,size:a="md"}){let s=u[e]||d.AlertTriangle,n=m[e]||"bg-muted text-muted-foreground";return(0,t.jsx)("div",{className:(0,c.cn)("flex items-center justify-center rounded-lg",{sm:"h-7 w-7",md:"h-9 w-9",lg:"h-12 w-12"}[a],n,r),children:(0,t.jsx)(s,{className:{sm:"h-3.5 w-3.5",md:"h-4 w-4",lg:"h-6 w-6"}[a]})})}e.s(["IncidentTypeIcon",()=>p],25933)},52815,65241,12618,1057,e=>{"use strict";var t=e.i(59834),r=e.i(71908),a=e.i(22513),s=e.i(50875);function n({level:e,className:n}){let i=s.damageLevelColors[e.toLowerCase()]||"bg-muted text-muted-foreground border-muted";return(0,t.jsx)(r.Badge,{variant:"outline",className:(0,a.cn)("font-medium capitalize text-[11px] px-2 py-0.5",i,n),children:e.replace(/_/g," ")})}e.s(["DamageBadge",()=>n],52815);var i=e.i(42656),o=e.i(65597),l=e.i(44261);e.i(37673);var d=e.i(79542),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let a=(0,d.createSlot)(`Primitive.${r}`),s=i.forwardRef((e,s)=>{let{asChild:n,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?a:r,{...i,ref:s})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),u=i.forwardRef((e,r)=>(0,t.jsx)(c.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));u.displayName="Label",e.s(["Label",()=>u,"Root",()=>u],23469);var m=e.i(23469),m=m;function p({className:e,...r}){return(0,t.jsx)(m.Root,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}function h({className:e,...r}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...r})}var f=e.i(79887),x=e.i(50752),g=e.i(2819),v=e.i(83113),y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let a=(0,d.createSlot)(`Primitive.${r}`),s=i.forwardRef((e,s)=>{let{asChild:n,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?a:r,{...i,ref:s})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),b=e.i(7101),j=e.i(87910),w=e.i(58853),N=e.i(63534),S=e.i(38798),k=e.i(81837),C="Radio",[R,D]=(0,v.createContextScope)(C),[M,P]=R(C),I=i.forwardRef((e,r)=>{let{__scopeRadio:a,name:s,checked:n=!1,required:o,disabled:l,value:d="on",onCheck:c,form:u,...m}=e,[p,h]=i.useState(null),f=(0,g.useComposedRefs)(r,e=>h(e)),v=i.useRef(!1),b=!p||u||!!p.closest("form");return(0,t.jsxs)(M,{scope:a,checked:n,disabled:l,children:[(0,t.jsx)(y.button,{type:"button",role:"radio","aria-checked":n,"data-state":L(n),"data-disabled":l?"":void 0,disabled:l,value:d,...m,ref:f,onClick:(0,x.composeEventHandlers)(e.onClick,e=>{n||c?.(),b&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})}),b&&(0,t.jsx)(T,{control:p,bubbles:!v.current,name:s,value:d,checked:n,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});I.displayName=C;var A="RadioIndicator",E=i.forwardRef((e,r)=>{let{__scopeRadio:a,forceMount:s,...n}=e,i=P(A,a);return(0,t.jsx)(k.Presence,{present:s||i.checked,children:(0,t.jsx)(y.span,{"data-state":L(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:r})})});E.displayName=A;var T=i.forwardRef(({__scopeRadio:e,control:r,checked:a,bubbles:s=!0,...n},o)=>{let l=i.useRef(null),d=(0,g.useComposedRefs)(l,o),c=(0,S.usePrevious)(a),u=(0,N.useSize)(r);return i.useEffect(()=>{let e=l.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==a&&t){let r=new Event("click",{bubbles:s});t.call(e,a),e.dispatchEvent(r)}},[c,a,s]),(0,t.jsx)(y.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:d,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function L(e){return e?"checked":"unchecked"}T.displayName="RadioBubbleInput";var z=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],F="RadioGroup",[O,H]=(0,v.createContextScope)(F,[b.createRovingFocusGroupScope,D]),K=(0,b.createRovingFocusGroupScope)(),_=D(),[V,q]=O(F),B=i.forwardRef((e,r)=>{let{__scopeRadioGroup:a,name:s,defaultValue:n,value:i,required:o=!1,disabled:l=!1,orientation:d,dir:c,loop:u=!0,onValueChange:m,...p}=e,h=K(a),f=(0,w.useDirection)(c),[x,g]=(0,j.useControllableState)({prop:i,defaultProp:n??null,onChange:m,caller:F});return(0,t.jsx)(V,{scope:a,name:s,required:o,disabled:l,value:x,onValueChange:g,children:(0,t.jsx)(b.Root,{asChild:!0,...h,orientation:d,dir:f,loop:u,children:(0,t.jsx)(y.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":l?"":void 0,dir:f,...p,ref:r})})})});B.displayName=F;var $="RadioGroupItem",U=i.forwardRef((e,r)=>{let{__scopeRadioGroup:a,disabled:s,...n}=e,o=q($,a),l=o.disabled||s,d=K(a),c=_(a),u=i.useRef(null),m=(0,g.useComposedRefs)(r,u),p=o.value===n.value,h=i.useRef(!1);return i.useEffect(()=>{let e=e=>{z.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,t.jsx)(b.Item,{asChild:!0,...d,focusable:!l,active:p,children:(0,t.jsx)(I,{disabled:l,required:o.required,checked:p,...c,...n,name:o.name,ref:m,onCheck:()=>o.onValueChange(n.value),onKeyDown:(0,x.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,x.composeEventHandlers)(n.onFocus,()=>{h.current&&u.current?.click()})})})});U.displayName=$;var G=i.forwardRef((e,r)=>{let{__scopeRadioGroup:a,...s}=e,n=_(a);return(0,t.jsx)(E,{...n,...s,ref:r})});G.displayName="RadioGroupIndicator",e.s(["Indicator",()=>G,"Item",()=>U,"RadioGroup",()=>B,"RadioGroupIndicator",()=>G,"RadioGroupItem",()=>U,"Root",()=>B,"createRadioGroupScope",()=>H],69525);var Q=e.i(69525),Q=Q;function X({className:e,...r}){return(0,t.jsx)(Q.Root,{"data-slot":"radio-group",className:(0,a.cn)("grid gap-3",e),...r})}function Y({className:e,...r}){return(0,t.jsx)(Q.Item,{"data-slot":"radio-group-item",className:(0,a.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(Q.Indicator,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,t.jsx)(f.CircleIcon,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var W=e.i(71579),J=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let a=(0,d.createSlot)(`Primitive.${r}`),s=i.forwardRef((e,s)=>{let{asChild:n,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?a:r,{...i,ref:s})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),Z=e.i(31254),ee=["PageUp","PageDown"],et=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],er={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ea="Slider",[es,en,ei]=(0,Z.createCollection)(ea),[eo,el]=(0,v.createContextScope)(ea,[ei]),[ed,ec]=eo(ea),eu=i.forwardRef((e,r)=>{let{name:a,min:s=0,max:n=100,step:o=1,orientation:l="horizontal",disabled:d=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:m,onValueChange:p=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:g,...v}=e,y=i.useRef(new Set),b=i.useRef(0),w="horizontal"===l,[N=[],S]=(0,j.useControllableState)({prop:m,defaultProp:u,onChange:e=>{let t=[...y.current];t[b.current]?.focus(),p(e)}}),k=i.useRef(N);function C(e,t,{commit:r}={commit:!1}){let a,i=(String(o).split(".")[1]||"").length,l=Math.round((Math.round((e-s)/o)*o+s)*(a=Math.pow(10,i)))/a,d=(0,W.clamp)(l,[s,n]);S((e=[])=>{let a=function(e=[],t,r){let a=[...e];return a[r]=t,a.sort((e,t)=>e-t)}(e,d,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,r)=>e[r+1]-t))>=t;return!0}(a,c*o))return e;{b.current=a.indexOf(d);let t=String(a)!==String(e);return t&&r&&h(a),t?a:e}})}return(0,t.jsx)(ed,{scope:e.__scopeSlider,name:a,disabled:d,min:s,max:n,valueIndexToChangeRef:b,thumbs:y.current,values:N,orientation:l,form:g,children:(0,t.jsx)(es.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(es.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(w?eh:ef,{"aria-disabled":d,"data-disabled":d?"":void 0,...v,ref:r,onPointerDown:(0,x.composeEventHandlers)(v.onPointerDown,()=>{d||(k.current=N)}),min:s,max:n,inverted:f,onSlideStart:d?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let r=e.map(e=>Math.abs(e-t)),a=Math.min(...r);return r.indexOf(a)}(N,e);C(e,t)},onSlideMove:d?void 0:function(e){C(e,b.current)},onSlideEnd:d?void 0:function(){let e=k.current[b.current];N[b.current]!==e&&h(N)},onHomeKeyDown:()=>!d&&C(s,0,{commit:!0}),onEndKeyDown:()=>!d&&C(n,N.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!d){let r=ee.includes(e.key)||e.shiftKey&&et.includes(e.key),a=b.current;C(N[a]+o*(r?10:1)*t,a,{commit:!0})}}})})})})});eu.displayName=ea;var[em,ep]=eo(ea,{startEdge:"left",endEdge:"right",size:"width",direction:1}),eh=i.forwardRef((e,r)=>{let{min:a,max:s,dir:n,inverted:o,onSlideStart:l,onSlideMove:d,onSlideEnd:c,onStepKeyDown:u,...m}=e,[p,h]=i.useState(null),f=(0,g.useComposedRefs)(r,e=>h(e)),x=i.useRef(void 0),v=(0,w.useDirection)(n),y="ltr"===v,b=y&&!o||!y&&o;function j(e){let t=x.current||p.getBoundingClientRect(),r=eC([0,t.width],b?[a,s]:[s,a]);return x.current=t,r(e-t.left)}return(0,t.jsx)(em,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:(0,t.jsx)(ex,{dir:v,"data-orientation":"horizontal",...m,ref:f,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=j(e.clientX);l?.(t)},onSlideMove:e=>{let t=j(e.clientX);d?.(t)},onSlideEnd:()=>{x.current=void 0,c?.()},onStepKeyDown:e=>{let t=er[b?"from-left":"from-right"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),ef=i.forwardRef((e,r)=>{let{min:a,max:s,inverted:n,onSlideStart:o,onSlideMove:l,onSlideEnd:d,onStepKeyDown:c,...u}=e,m=i.useRef(null),p=(0,g.useComposedRefs)(r,m),h=i.useRef(void 0),f=!n;function x(e){let t=h.current||m.current.getBoundingClientRect(),r=eC([0,t.height],f?[s,a]:[a,s]);return h.current=t,r(e-t.top)}return(0,t.jsx)(em,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:(0,t.jsx)(ex,{"data-orientation":"vertical",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=x(e.clientY);o?.(t)},onSlideMove:e=>{let t=x(e.clientY);l?.(t)},onSlideEnd:()=>{h.current=void 0,d?.()},onStepKeyDown:e=>{let t=er[f?"from-bottom":"from-top"].includes(e.key);c?.({event:e,direction:t?-1:1})}})})}),ex=i.forwardRef((e,r)=>{let{__scopeSlider:a,onSlideStart:s,onSlideMove:n,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:d,...c}=e,u=ec(ea,a);return(0,t.jsx)(J.span,{...c,ref:r,onKeyDown:(0,x.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(o(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):ee.concat(et).includes(e.key)&&(d(e),e.preventDefault())}),onPointerDown:(0,x.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():s(e)}),onPointerMove:(0,x.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&n(e)}),onPointerUp:(0,x.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),i(e))})})}),eg="SliderTrack",ev=i.forwardRef((e,r)=>{let{__scopeSlider:a,...s}=e,n=ec(eg,a);return(0,t.jsx)(J.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...s,ref:r})});ev.displayName=eg;var ey="SliderRange",eb=i.forwardRef((e,r)=>{let{__scopeSlider:a,...s}=e,n=ec(ey,a),o=ep(ey,a),l=i.useRef(null),d=(0,g.useComposedRefs)(r,l),c=n.values.length,u=n.values.map(e=>ek(e,n.min,n.max)),m=c>1?Math.min(...u):0,p=100-Math.max(...u);return(0,t.jsx)(J.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...s,ref:d,style:{...e.style,[o.startEdge]:m+"%",[o.endEdge]:p+"%"}})});eb.displayName=ey;var ej="SliderThumb",ew=i.forwardRef((e,r)=>{let a=en(e.__scopeSlider),[s,n]=i.useState(null),o=(0,g.useComposedRefs)(r,e=>n(e)),l=i.useMemo(()=>s?a().findIndex(e=>e.ref.current===s):-1,[a,s]);return(0,t.jsx)(eN,{...e,ref:o,index:l})}),eN=i.forwardRef((e,r)=>{var a,s,n,o,l;let d,c,{__scopeSlider:u,index:m,name:p,...h}=e,f=ec(ej,u),v=ep(ej,u),[y,b]=i.useState(null),j=(0,g.useComposedRefs)(r,e=>b(e)),w=!y||f.form||!!y.closest("form"),S=(0,N.useSize)(y),k=f.values[m],C=void 0===k?0:ek(k,f.min,f.max),R=(a=m,(s=f.values.length)>2?`Value ${a+1} of ${s}`:2===s?["Minimum","Maximum"][a]:void 0),D=S?.[v.size],M=D?(n=D,o=C,l=v.direction,c=eC([0,50],[0,d=n/2]),(d-c(o)*l)*l):0;return i.useEffect(()=>{if(y)return f.thumbs.add(y),()=>{f.thumbs.delete(y)}},[y,f.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[v.startEdge]:`calc(${C}% + ${M}px)`},children:[(0,t.jsx)(es.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(J.span,{role:"slider","aria-label":e["aria-label"]||R,"aria-valuemin":f.min,"aria-valuenow":k,"aria-valuemax":f.max,"aria-orientation":f.orientation,"data-orientation":f.orientation,"data-disabled":f.disabled?"":void 0,tabIndex:f.disabled?void 0:0,...h,ref:j,style:void 0===k?{display:"none"}:e.style,onFocus:(0,x.composeEventHandlers)(e.onFocus,()=>{f.valueIndexToChangeRef.current=m})})}),w&&(0,t.jsx)(eS,{name:p??(f.name?f.name+(f.values.length>1?"[]":""):void 0),form:f.form,value:k},m)]})});ew.displayName=ej;var eS=i.forwardRef(({__scopeSlider:e,value:r,...a},s)=>{let n=i.useRef(null),o=(0,g.useComposedRefs)(n,s),l=(0,S.usePrevious)(r);return i.useEffect(()=>{let e=n.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(l!==r&&t){let a=new Event("input",{bubbles:!0});t.call(e,r),e.dispatchEvent(a)}},[l,r]),(0,t.jsx)(J.input,{style:{display:"none"},...a,ref:o,defaultValue:r})});function ek(e,t,r){return(0,W.clamp)(100/(r-t)*(e-t),[0,100])}function eC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}eS.displayName="RadioBubbleInput",e.s(["Range",()=>eb,"Root",()=>eu,"Slider",()=>eu,"SliderRange",()=>eb,"SliderThumb",()=>ew,"SliderTrack",()=>ev,"Thumb",()=>ew,"Track",()=>ev,"createSliderScope",()=>el],86976);var eR=e.i(86976),eR=eR;function eD({className:e,defaultValue:r,value:s,min:n=0,max:o=100,...l}){let d=i.useMemo(()=>Array.isArray(s)?s:Array.isArray(r)?r:[n,o],[s,r,n,o]);return(0,t.jsxs)(eR.Root,{"data-slot":"slider",defaultValue:r,value:s,min:n,max:o,className:(0,a.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...l,children:[(0,t.jsx)(eR.Track,{"data-slot":"slider-track",className:(0,a.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,t.jsx)(eR.Range,{"data-slot":"slider-range",className:(0,a.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,r)=>(0,t.jsx)(eR.Thumb,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},r))]})}var eM=e.i(41868),eP=e.i(12061),eI=e.i(69501),eA=e.i(94325);let eE=(0,eA.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),eT=[{value:"destroyed",label:"Destroyed",description:"Structure completely destroyed"},{value:"major",label:"Major",description:"Significant structural damage"},{value:"minor",label:"Minor",description:"Cosmetic or limited damage"},{value:"affected",label:"Affected",description:"In affected area, minor impact"},{value:"none",label:"None",description:"No damage observed"}];function eL({open:e,onOpenChange:r,incidentId:a,parcel:s}){let[n,d]=(0,i.useState)("minor"),[c,u]=(0,i.useState)([25]),[m,f]=(0,i.useState)([10]),[x,g]=(0,i.useState)(new Date().toISOString().split("T")[0]),[v,y]=(0,i.useState)(""),b=(0,eP.useSubmitSurvey)(),j=async()=>{try{await b.mutateAsync({incidentId:a,parcelId:s.affectedParcelId,survey:{damageLevel:n,improvementDamagePercent:c[0],landDamagePercent:m[0],surveyDate:x,notes:v}}),eI.toast.success("Damage survey submitted",{description:`Survey recorded for parcel ${s.apn}`}),r(!1)}catch(e){eI.toast.error("Failed to submit survey",{description:"Please try again"})}};return(0,t.jsx)(o.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(o.DialogContent,{className:"sm:max-w-lg",children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:"Damage Survey"}),(0,t.jsxs)(o.DialogDescription,{children:["Record damage assessment for parcel"," ",(0,t.jsx)("span",{className:"font-mono font-medium",children:s.apn})]})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(p,{className:"text-sm font-medium",children:"Damage Level"}),(0,t.jsx)(X,{value:n,onValueChange:d,children:eT.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 rounded-lg border p-3 cursor-pointer hover:bg-muted/50 transition-colors",children:[(0,t.jsx)(Y,{value:e.value,id:e.value}),(0,t.jsxs)(p,{htmlFor:e.value,className:"flex-1 cursor-pointer",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e.label}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(p,{className:"text-sm font-medium",children:"Improvement Damage"}),(0,t.jsxs)("span",{className:"text-sm font-medium tabular-nums",children:[c[0],"%"]})]}),(0,t.jsx)(eD,{value:c,onValueChange:u,min:0,max:100,step:5,className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(p,{className:"text-sm font-medium",children:"Land Damage"}),(0,t.jsxs)("span",{className:"text-sm font-medium tabular-nums",children:[m[0],"%"]})]}),(0,t.jsx)(eD,{value:m,onValueChange:f,min:0,max:100,step:5,className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p,{className:"text-sm font-medium",children:"Survey Date"}),(0,t.jsx)(eM.Input,{type:"date",value:x,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p,{className:"text-sm font-medium",children:"Notes"}),(0,t.jsx)(h,{value:v,onChange:e=>y(e.target.value),placeholder:"Additional observations...",rows:3})]})]}),(0,t.jsxs)(o.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,t.jsxs)(l.Button,{onClick:j,disabled:b.isPending,children:[b.isPending&&(0,t.jsx)(eE,{className:"h-4 w-4 mr-2 animate-spin"}),"Submit Survey"]})]})]})})}e.s(["SurveyDialog",()=>eL],65241);var ez=e.i(48846);let eF=(0,eA.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var eO=e.i(36941);function eH({open:e,onOpenChange:r,incidentId:a,parcel:s}){let[n,d]=(0,i.useState)(null),c=(0,eP.useComputeReassessment)(),u=async()=>{try{let e=await c.mutateAsync({incidentId:a,parcelId:s.affectedParcelId});d(e),eI.toast.success("Reassessment computed",{description:`Value reduction of ${(0,ez.formatCurrency)(e.reductionAmount)} for parcel ${s.apn}`})}catch(e){eI.toast.error("Failed to compute reassessment",{description:"Please try again"})}};return(0,t.jsx)(o.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(o.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:"Reassessment"}),(0,t.jsxs)(o.DialogDescription,{children:["Compute revised values for parcel"," ",(0,t.jsx)("span",{className:"font-mono font-medium",children:s.apn})]})]}),n?(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-success",children:[(0,t.jsx)(eO.CheckCircle,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Reassessment Complete"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Prior Value"}),(0,t.jsx)("p",{className:"text-sm font-semibold tabular-nums",children:(0,ez.formatCurrency)(n.priorTotalValue)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Revised Value"}),(0,t.jsx)("p",{className:"text-sm font-semibold tabular-nums text-primary",children:(0,ez.formatCurrency)(n.revisedTotalValue)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Reduction"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)(eF,{className:"h-3.5 w-3.5 text-destructive"}),(0,t.jsx)("p",{className:"text-sm font-semibold tabular-nums text-destructive",children:(0,ez.formatCurrency)(n.reductionAmount)})]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-3 space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Land"}),(0,t.jsxs)("span",{children:[(0,ez.formatCurrency)(n.priorLandValue)," → ",(0,ez.formatCurrency)(n.revisedLandValue)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Improvements"}),(0,t.jsxs)("span",{children:[(0,ez.formatCurrency)(n.priorImprovementValue)," → ",(0,ez.formatCurrency)(n.revisedImprovementValue)]})]})]})]}):(0,t.jsx)("div",{className:"py-6 text-center",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"This will compute revised property values based on the recorded damage survey data. The computation uses standard calamity reassessment formulas."})}),(0,t.jsx)(o.DialogFooter,{children:n?(0,t.jsx)(l.Button,{onClick:()=>r(!1),children:"Done"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,t.jsxs)(l.Button,{onClick:u,disabled:c.isPending,children:[c.isPending&&(0,t.jsx)(eE,{className:"h-4 w-4 mr-2 animate-spin"}),"Compute Reassessment"]})]})})]})})}e.s(["ReassessmentDialog",()=>eH],12618);let eK=(0,eA.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);e.s(["Calculator",()=>eK],1057)},45003,e=>{"use strict";var t=e.i(59834),r=e.i(42650),a=e.i(42656),s=e.i(12061),n=e.i(17896),i=e.i(52815),o=e.i(36740),l=e.i(15357),d=e.i(25933),c=e.i(65241),u=e.i(12618),m=e.i(31906),p=e.i(93749),h=e.i(79001),f=e.i(71908),x=e.i(44261),g=e.i(31404),v=e.i(48846),y=e.i(50875),b=e.i(43970),j=e.i(83685),w=e.i(75482);let N=(0,e.i(94325).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var S=e.i(69833),k=e.i(1057),C=e.i(33217);function R(){let e=(0,r.useParams)().id,{data:R,isLoading:D,error:M}=(0,s.useIncident)(e),[P,I]=(0,a.useState)(1),[A,E]=(0,a.useState)("all"),[T,L]=(0,a.useState)(null),[z,F]=(0,a.useState)(null),{data:O,isLoading:H}=(0,s.useAffectedParcels)({incidentId:e,page:P,damageLevel:"all"!==A?A:void 0});if(D)return(0,t.jsx)(p.DetailSkeleton,{});if(M||!R)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(j.AlertCircle,{className:"h-8 w-8 text-destructive mb-4"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Incident not found"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"The requested incident could not be loaded."})]});let K=[{accessorKey:"apn",header:"APN",cell:({row:e})=>(0,t.jsx)(C.default,{href:`/parcels/${e.original.parcelId}`,className:"font-mono text-sm font-medium text-primary hover:underline",children:e.getValue("apn")})},{accessorKey:"primaryAddress",header:"Address",cell:({row:e})=>(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.getValue("primaryAddress")||"—"})},{accessorKey:"damageLevel",header:"Damage",cell:({row:e})=>{let r=e.getValue("damageLevel");return r?(0,t.jsx)(i.DamageBadge,{level:r}):(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}},{accessorKey:"surveyStatus",header:"Survey",cell:({row:e})=>(0,t.jsx)(f.Badge,{variant:"outline",className:"text-xs capitalize",children:e.getValue("surveyStatus")?.replace(/_/g," ")||"pending"})},{accessorKey:"reassessmentStatus",header:"Reassessment",cell:({row:e})=>(0,t.jsx)(f.Badge,{variant:"outline",className:"text-xs capitalize",children:e.getValue("reassessmentStatus")?.replace(/_/g," ")||"pending"})},{id:"actions",header:"Actions",cell:({row:e})=>{let r=e.original;return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(x.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:e=>{e.stopPropagation(),L(r)},children:[(0,t.jsx)(S.FileSearch,{className:"h-3.5 w-3.5 mr-1"}),"Survey"]}),(0,t.jsxs)(x.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:e=>{e.stopPropagation(),F(r)},children:[(0,t.jsx)(k.Calculator,{className:"h-3.5 w-3.5 mr-1"}),"Reassess"]})]})}}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(C.default,{href:"/calamity",children:(0,t.jsxs)(x.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground -ml-2",children:[(0,t.jsx)(b.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Calamity"]})}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(d.IncidentTypeIcon,{type:R.incidentType,size:"lg"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:R.name}),(0,t.jsx)(n.StatusBadge,{status:R.status})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:y.incidentTypeLabels[R.incidentType]||R.incidentType})]})]})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsx)(h.Card,{className:"shadow-sm",children:(0,t.jsxs)(h.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(N,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start Date"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:(0,v.formatDate)(R.startDate)})]})]})}),(0,t.jsx)(h.Card,{className:"shadow-sm",children:(0,t.jsxs)(h.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(N,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"End Date"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:R.endDate?(0,v.formatDate)(R.endDate):"Ongoing"})]})]})}),(0,t.jsx)(h.Card,{className:"shadow-sm",children:(0,t.jsxs)(h.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(w.MapPin,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Affected Parcels"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:R.affectedParcelCount||0})]})]})})]}),R.description&&(0,t.jsx)(h.Card,{className:"shadow-sm",children:(0,t.jsx)(h.CardContent,{className:"p-4",children:(0,t.jsx)("p",{className:"text-sm",children:R.description})})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Affected Parcels"}),(0,t.jsxs)(g.Select,{value:A,onValueChange:e=>{E(e),I(1)},children:[(0,t.jsx)(g.SelectTrigger,{className:"h-9 w-[160px]",children:(0,t.jsx)(g.SelectValue,{placeholder:"Damage Level"})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"all",children:"All Levels"}),(0,t.jsx)(g.SelectItem,{value:"destroyed",children:"Destroyed"}),(0,t.jsx)(g.SelectItem,{value:"major",children:"Major"}),(0,t.jsx)(g.SelectItem,{value:"minor",children:"Minor"}),(0,t.jsx)(g.SelectItem,{value:"affected",children:"Affected"}),(0,t.jsx)(g.SelectItem,{value:"none",children:"None"})]})]})]}),(0,t.jsx)(o.DataTable,{columns:K,data:O?.data||[],isLoading:H,emptyState:(0,t.jsx)(m.EmptyState,{icon:w.MapPin,title:"No affected parcels",description:"No parcels have been linked to this incident yet."})}),O?.pagination&&(0,t.jsx)(l.DataTablePagination,{pagination:O.pagination,onPageChange:I})]}),T&&(0,t.jsx)(c.SurveyDialog,{open:!!T,onOpenChange:e=>!e&&L(null),incidentId:e,parcel:T}),z&&(0,t.jsx)(u.ReassessmentDialog,{open:!!z,onOpenChange:e=>!e&&F(null),incidentId:e,parcel:z})]})}e.s(["default",()=>R],45003)}]);