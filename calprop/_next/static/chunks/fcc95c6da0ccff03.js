(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71908,e=>{"use strict";var t=e.i(59834),s=e.i(79448),a=e.i(78961),r=e.i(22513);let i=(0,s.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s="default",asChild:n=!1,...l}){let d=n?a.Slot.Root:"span";return(0,t.jsx)(d,{"data-slot":"badge","data-variant":s,className:(0,r.cn)(i({variant:s}),e),...l})}e.s(["Badge",()=>n])},79001,e=>{"use strict";var t=e.i(59834),s=e.i(22513);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>n,"CardHeader",()=>r,"CardTitle",()=>i])},25305,e=>{"use strict";var t=e.i(42828),s=e.i(85398);function a(e){return(0,t.useQuery)({queryKey:["parcels",e],queryFn:()=>(0,s.apiFetch)("/v1/parcels",{params:{search:e.search,status:e.status,page:e.page||1,pageSize:e.pageSize||20}})})}function r(e){return(0,t.useQuery)({queryKey:["parcel",e],queryFn:()=>(0,s.apiFetch)(`/v1/parcels/${e}`),enabled:!!e})}function i(e){return(0,t.useQuery)({queryKey:["parcel-flags",e],queryFn:()=>(0,s.apiFetch)(`/v1/parcels/${e}/flags`),enabled:!!e})}e.s(["useParcel",()=>r,"useParcelFlags",()=>i,"useParcels",()=>a])},52815,e=>{"use strict";var t=e.i(59834),s=e.i(71908),a=e.i(22513),r=e.i(50875);function i({level:e,className:i}){let n=r.damageLevelColors[e.toLowerCase()]||"bg-muted text-muted-foreground border-muted";return(0,t.jsx)(s.Badge,{variant:"outline",className:(0,a.cn)("font-medium capitalize text-[11px] px-2 py-0.5",n,i),children:e.replace(/_/g," ")})}e.s(["DamageBadge",()=>i])},41868,e=>{"use strict";var t=e.i(59834),s=e.i(22513);function a({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>a])},38798,e=>{"use strict";var t=e.i(42656);function s(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},71579,e=>{"use strict";function t(e,[t,s]){return Math.min(s,Math.max(t,e))}e.s(["clamp",()=>t])},37243,e=>{"use strict";var t=e.i(59834),s=e.i(48846);function a({segments:e,total:a}){if(0===a)return(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"No assessed value data"});let r=[...e].filter(e=>e.value>0).sort((e,t)=>t.value-e.value);return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-3 w-full rounded-full overflow-hidden flex bg-muted",children:r.map(e=>{let r=e.value/a*100;return(0,t.jsx)("div",{className:"h-full transition-all duration-700 ease-out first:rounded-l-full last:rounded-r-full",style:{width:`${r}%`,backgroundColor:e.color},title:`${e.label}: ${(0,s.formatCurrency)(e.value)}`},e.label)})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-1.5",children:r.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"inline-block h-2 w-2 rounded-full shrink-0",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.label}),(0,t.jsx)("span",{className:"text-xs font-medium tabular-nums",children:(0,s.formatCurrency)(e.value)})]},e.label))})]})}e.s(["ValueBreakdownBar",()=>a])},54004,e=>{"use strict";let t=(0,e.i(94325).default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);e.s(["ClipboardList",()=>t],54004)},67289,e=>{"use strict";let t=(0,e.i(94325).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],67289)},38104,59537,e=>{"use strict";var t=e.i(94325);let s=(0,t.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>s],38104);let a=(0,t.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>a],59537)},36941,e=>{"use strict";let t=(0,e.i(94325).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],36941)},69833,e=>{"use strict";let t=(0,e.i(94325).default)("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]);e.s(["FileSearch",()=>t],69833)},74182,e=>{"use strict";let t=(0,e.i(94325).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],74182)},50875,e=>{"use strict";e.s(["damageLevelColors",0,{destroyed:"bg-destructive/15 text-destructive border-destructive/20",major:"bg-[oklch(0.7_0.15_40)]/15 text-[oklch(0.55_0.18_40)] border-[oklch(0.7_0.15_40)]/20",minor:"bg-warning/15 text-warning border-warning/20",affected:"bg-info/15 text-info border-info/20",inaccessible:"bg-muted text-muted-foreground border-muted",none:"bg-success/15 text-success border-success/20"},"incidentTypeLabels",0,{wildfire:"Wildfire",flood:"Flood",earthquake:"Earthquake",mudslide:"Mudslide",hurricane:"Hurricane",tornado:"Tornado",other:"Other"},"statusColors",0,{active:"bg-success/15 text-success border-success/20",inactive:"bg-muted text-muted-foreground border-muted",pending:"bg-warning/15 text-warning border-warning/20",archived:"bg-muted text-muted-foreground border-muted",monitoring:"bg-info/15 text-info border-info/20",closed:"bg-muted text-muted-foreground border-muted"}])},17896,e=>{"use strict";var t=e.i(59834),s=e.i(71908),a=e.i(22513),r=e.i(50875);function i({status:e,className:i}){let n=r.statusColors[e.toLowerCase()]||"bg-muted text-muted-foreground border-muted";return(0,t.jsxs)(s.Badge,{variant:"outline",className:(0,a.cn)("font-medium capitalize text-[11px] px-2 py-0.5",n,i),children:[(0,t.jsx)("span",{className:"mr-1.5 inline-block h-1.5 w-1.5 rounded-full bg-current"}),e.replace(/_/g," ")]})}e.s(["StatusBadge",()=>i])},12061,e=>{"use strict";var t=e.i(42828),s=e.i(42656),a=e.i(93312),r=e.i(77456),i=e.i(54368),n=e.i(12674),l=class extends i.Subscribable{#e;#t=void 0;#s;#a;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,n.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,n.hashKey)(t.mutationKey)!==(0,n.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#i()}mutate(e,t){return this.#a=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#r(){let e=this.#s?.state??(0,a.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){r.notifyManager.batch(()=>{if(this.#a&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#a.onSuccess?.(e.data,t,s,a)}catch(e){Promise.reject(e)}try{this.#a.onSettled?.(e.data,null,t,s,a)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#a.onError?.(e.error,t,s,a)}catch(e){Promise.reject(e)}try{this.#a.onSettled?.(void 0,e.error,t,s,a)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},d=e.i(73252);function o(e,t){let a=(0,d.useQueryClient)(t),[i]=s.useState(()=>new l(a,e));s.useEffect(()=>{i.setOptions(e)},[i,e]);let o=s.useSyncExternalStore(s.useCallback(e=>i.subscribe(r.notifyManager.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),c=s.useCallback((e,t)=>{i.mutate(e,t).catch(n.noop)},[i]);if(o.error&&(0,n.shouldThrowError)(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:c,mutateAsync:o.mutate}}var c=e.i(85398);function u(e){return(0,t.useQuery)({queryKey:["incidents",e],queryFn:()=>(0,c.apiFetch)("/v1/calamity/incidents",{params:{status:e}})})}function m(e){return(0,t.useQuery)({queryKey:["incident",e],queryFn:()=>(0,c.apiFetch)(`/v1/calamity/incidents/${e}`),enabled:!!e})}function x(e){return(0,t.useQuery)({queryKey:["affected-parcels",e],queryFn:()=>(0,c.apiFetch)(`/v1/calamity/incidents/${e.incidentId}/parcels`,{params:{page:e.page||1,pageSize:e.pageSize||20,damageLevel:e.damageLevel}}),enabled:!!e.incidentId})}function h(){let e=(0,d.useQueryClient)();return o({mutationFn:({incidentId:e,parcelId:t,survey:s})=>(0,c.apiFetch)(`/v1/calamity/incidents/${e}/parcels/${t}/survey`,{method:"POST",body:s}),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["affected-parcels"]}),e.invalidateQueries({queryKey:["incident",s.incidentId]})}})}function p(){let e=(0,d.useQueryClient)();return o({mutationFn:({incidentId:e,parcelId:t})=>(0,c.apiFetch)(`/v1/calamity/incidents/${e}/parcels/${t}/reassess`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["affected-parcels"]})}})}e.s(["useAffectedParcels",()=>x,"useComputeReassessment",()=>p,"useIncident",()=>m,"useIncidents",()=>u,"useSubmitSurvey",()=>h],12061)},84707,e=>{"use strict";var t=e.i(59834),s=e.i(79001),a=e.i(80612),r=e.i(22513),i=e.i(33217);function n({title:e,value:n,icon:l,description:d,trend:o,href:c,isLoading:u=!1,className:m}){let x=(0,t.jsx)(s.Card,{className:(0,r.cn)("shadow-sm transition-all duration-200",c&&"cursor-pointer hover:shadow-md hover:border-primary/20 hover:-translate-y-0.5",m),children:(0,t.jsxs)(s.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[l&&(0,t.jsx)(l,{className:"h-4 w-4"}),e]}),(0,t.jsxs)("div",{className:"mt-3 flex items-baseline gap-2",children:[u?(0,t.jsx)(a.Skeleton,{className:"h-8 w-24"}):(0,t.jsx)("span",{className:"text-2xl font-bold tracking-tight",children:n}),o&&!u&&(0,t.jsxs)("span",{className:(0,r.cn)("text-xs font-medium",o.isPositive?"text-success":"text-destructive"),children:[o.isPositive?"+":"",o.value,"%"]})]}),d&&(0,t.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:d})]})});return c?(0,t.jsx)(i.default,{href:c,className:"block",children:x}):x}e.s(["KpiCard",()=>n])},65241,12618,1057,e=>{"use strict";var t=e.i(59834),s=e.i(42656),a=e.i(65597),r=e.i(44261);e.i(37673);var i=e.i(79542),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let r=(0,i.createSlot)(`Primitive.${a}`),n=s.forwardRef((e,s)=>{let{asChild:i,...n}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?r:a,{...n,ref:s})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),l=s.forwardRef((e,s)=>(0,t.jsx)(n.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label",e.s(["Label",()=>l,"Root",()=>l],23469);var d=e.i(23469),d=d,o=e.i(22513);function c({className:e,...s}){return(0,t.jsx)(d.Root,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}function u({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,o.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}var m=e.i(79887),x=e.i(50752),h=e.i(2819),p=e.i(83113),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let r=(0,i.createSlot)(`Primitive.${a}`),n=s.forwardRef((e,s)=>{let{asChild:i,...n}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?r:a,{...n,ref:s})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),g=e.i(7101),v=e.i(87910),j=e.i(58853),b=e.i(63534),y=e.i(38798),N=e.i(81837),w="Radio",[C,S]=(0,p.createContextScope)(w),[k,R]=C(w),A=s.forwardRef((e,a)=>{let{__scopeRadio:r,name:i,checked:n=!1,required:l,disabled:d,value:o="on",onCheck:c,form:u,...m}=e,[p,g]=s.useState(null),v=(0,h.useComposedRefs)(a,e=>g(e)),j=s.useRef(!1),b=!p||u||!!p.closest("form");return(0,t.jsxs)(k,{scope:r,checked:n,disabled:d,children:[(0,t.jsx)(f.button,{type:"button",role:"radio","aria-checked":n,"data-state":M(n),"data-disabled":d?"":void 0,disabled:d,value:o,...m,ref:v,onClick:(0,x.composeEventHandlers)(e.onClick,e=>{n||c?.(),b&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),b&&(0,t.jsx)(I,{control:p,bubbles:!j.current,name:i,value:o,checked:n,required:l,disabled:d,form:u,style:{transform:"translateX(-100%)"}})]})});A.displayName=w;var P="RadioIndicator",D=s.forwardRef((e,s)=>{let{__scopeRadio:a,forceMount:r,...i}=e,n=R(P,a);return(0,t.jsx)(N.Presence,{present:r||n.checked,children:(0,t.jsx)(f.span,{"data-state":M(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s})})});D.displayName=P;var I=s.forwardRef(({__scopeRadio:e,control:a,checked:r,bubbles:i=!0,...n},l)=>{let d=s.useRef(null),o=(0,h.useComposedRefs)(d,l),c=(0,y.usePrevious)(r),u=(0,b.useSize)(a);return s.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[c,r,i]),(0,t.jsx)(f.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:o,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function M(e){return e?"checked":"unchecked"}I.displayName="RadioBubbleInput";var L=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],F="RadioGroup",[E,B]=(0,p.createContextScope)(F,[g.createRovingFocusGroupScope,S]),z=(0,g.createRovingFocusGroupScope)(),O=S(),[K,T]=E(F),V=s.forwardRef((e,s)=>{let{__scopeRadioGroup:a,name:r,defaultValue:i,value:n,required:l=!1,disabled:d=!1,orientation:o,dir:c,loop:u=!0,onValueChange:m,...x}=e,h=z(a),p=(0,j.useDirection)(c),[b,y]=(0,v.useControllableState)({prop:n,defaultProp:i??null,onChange:m,caller:F});return(0,t.jsx)(K,{scope:a,name:r,required:l,disabled:d,value:b,onValueChange:y,children:(0,t.jsx)(g.Root,{asChild:!0,...h,orientation:o,dir:p,loop:u,children:(0,t.jsx)(f.div,{role:"radiogroup","aria-required":l,"aria-orientation":o,"data-disabled":d?"":void 0,dir:p,...x,ref:s})})})});V.displayName=F;var q="RadioGroupItem",$=s.forwardRef((e,a)=>{let{__scopeRadioGroup:r,disabled:i,...n}=e,l=T(q,r),d=l.disabled||i,o=z(r),c=O(r),u=s.useRef(null),m=(0,h.useComposedRefs)(a,u),p=l.value===n.value,f=s.useRef(!1);return s.useEffect(()=>{let e=e=>{L.includes(e.key)&&(f.current=!0)},t=()=>f.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,t.jsx)(g.Item,{asChild:!0,...o,focusable:!d,active:p,children:(0,t.jsx)(A,{disabled:d,required:l.required,checked:p,...c,...n,name:l.name,ref:m,onCheck:()=>l.onValueChange(n.value),onKeyDown:(0,x.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,x.composeEventHandlers)(n.onFocus,()=>{f.current&&u.current?.click()})})})});$.displayName=q;var _=s.forwardRef((e,s)=>{let{__scopeRadioGroup:a,...r}=e,i=O(a);return(0,t.jsx)(D,{...i,...r,ref:s})});_.displayName="RadioGroupIndicator",e.s(["Indicator",()=>_,"Item",()=>$,"RadioGroup",()=>V,"RadioGroupIndicator",()=>_,"RadioGroupItem",()=>$,"Root",()=>V,"createRadioGroupScope",()=>B],69525);var H=e.i(69525),H=H;function U({className:e,...s}){return(0,t.jsx)(H.Root,{"data-slot":"radio-group",className:(0,o.cn)("grid gap-3",e),...s})}function Q({className:e,...s}){return(0,t.jsx)(H.Item,{"data-slot":"radio-group-item",className:(0,o.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,t.jsx)(H.Indicator,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,t.jsx)(m.CircleIcon,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var G=e.i(71579),W=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let r=(0,i.createSlot)(`Primitive.${a}`),n=s.forwardRef((e,s)=>{let{asChild:i,...n}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?r:a,{...n,ref:s})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),X=e.i(31254),Y=["PageUp","PageDown"],J=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Z={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ee="Slider",[et,es,ea]=(0,X.createCollection)(ee),[er,ei]=(0,p.createContextScope)(ee,[ea]),[en,el]=er(ee),ed=s.forwardRef((e,a)=>{let{name:r,min:i=0,max:n=100,step:l=1,orientation:d="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[i],value:m,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:f=!1,form:g,...j}=e,b=s.useRef(new Set),y=s.useRef(0),N="horizontal"===d,[w=[],C]=(0,v.useControllableState)({prop:m,defaultProp:u,onChange:e=>{let t=[...b.current];t[y.current]?.focus(),h(e)}}),S=s.useRef(w);function k(e,t,{commit:s}={commit:!1}){let a,r=(String(l).split(".")[1]||"").length,d=Math.round((Math.round((e-i)/l)*l+i)*(a=Math.pow(10,r)))/a,o=(0,G.clamp)(d,[i,n]);C((e=[])=>{let a=function(e=[],t,s){let a=[...e];return a[s]=t,a.sort((e,t)=>e-t)}(e,o,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,s)=>e[s+1]-t))>=t;return!0}(a,c*l))return e;{y.current=a.indexOf(o);let t=String(a)!==String(e);return t&&s&&p(a),t?a:e}})}return(0,t.jsx)(en,{scope:e.__scopeSlider,name:r,disabled:o,min:i,max:n,valueIndexToChangeRef:y,thumbs:b.current,values:w,orientation:d,form:g,children:(0,t.jsx)(et.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(et.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(N?eu:em,{"aria-disabled":o,"data-disabled":o?"":void 0,...j,ref:a,onPointerDown:(0,x.composeEventHandlers)(j.onPointerDown,()=>{o||(S.current=w)}),min:i,max:n,inverted:f,onSlideStart:o?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let s=e.map(e=>Math.abs(e-t)),a=Math.min(...s);return s.indexOf(a)}(w,e);k(e,t)},onSlideMove:o?void 0:function(e){k(e,y.current)},onSlideEnd:o?void 0:function(){let e=S.current[y.current];w[y.current]!==e&&p(w)},onHomeKeyDown:()=>!o&&k(i,0,{commit:!0}),onEndKeyDown:()=>!o&&k(n,w.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){let s=Y.includes(e.key)||e.shiftKey&&J.includes(e.key),a=y.current;k(w[a]+l*(s?10:1)*t,a,{commit:!0})}}})})})})});ed.displayName=ee;var[eo,ec]=er(ee,{startEdge:"left",endEdge:"right",size:"width",direction:1}),eu=s.forwardRef((e,a)=>{let{min:r,max:i,dir:n,inverted:l,onSlideStart:d,onSlideMove:o,onSlideEnd:c,onStepKeyDown:u,...m}=e,[x,p]=s.useState(null),f=(0,h.useComposedRefs)(a,e=>p(e)),g=s.useRef(void 0),v=(0,j.useDirection)(n),b="ltr"===v,y=b&&!l||!b&&l;function N(e){let t=g.current||x.getBoundingClientRect(),s=ew([0,t.width],y?[r,i]:[i,r]);return g.current=t,s(e-t.left)}return(0,t.jsx)(eo,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:(0,t.jsx)(ex,{dir:v,"data-orientation":"horizontal",...m,ref:f,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=N(e.clientX);d?.(t)},onSlideMove:e=>{let t=N(e.clientX);o?.(t)},onSlideEnd:()=>{g.current=void 0,c?.()},onStepKeyDown:e=>{let t=Z[y?"from-left":"from-right"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),em=s.forwardRef((e,a)=>{let{min:r,max:i,inverted:n,onSlideStart:l,onSlideMove:d,onSlideEnd:o,onStepKeyDown:c,...u}=e,m=s.useRef(null),x=(0,h.useComposedRefs)(a,m),p=s.useRef(void 0),f=!n;function g(e){let t=p.current||m.current.getBoundingClientRect(),s=ew([0,t.height],f?[i,r]:[r,i]);return p.current=t,s(e-t.top)}return(0,t.jsx)(eo,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:(0,t.jsx)(ex,{"data-orientation":"vertical",...u,ref:x,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=g(e.clientY);l?.(t)},onSlideMove:e=>{let t=g(e.clientY);d?.(t)},onSlideEnd:()=>{p.current=void 0,o?.()},onStepKeyDown:e=>{let t=Z[f?"from-bottom":"from-top"].includes(e.key);c?.({event:e,direction:t?-1:1})}})})}),ex=s.forwardRef((e,s)=>{let{__scopeSlider:a,onSlideStart:r,onSlideMove:i,onSlideEnd:n,onHomeKeyDown:l,onEndKeyDown:d,onStepKeyDown:o,...c}=e,u=el(ee,a);return(0,t.jsx)(W.span,{...c,ref:s,onKeyDown:(0,x.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):Y.concat(J).includes(e.key)&&(o(e),e.preventDefault())}),onPointerDown:(0,x.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():r(e)}),onPointerMove:(0,x.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:(0,x.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),n(e))})})}),eh="SliderTrack",ep=s.forwardRef((e,s)=>{let{__scopeSlider:a,...r}=e,i=el(eh,a);return(0,t.jsx)(W.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:s})});ep.displayName=eh;var ef="SliderRange",eg=s.forwardRef((e,a)=>{let{__scopeSlider:r,...i}=e,n=el(ef,r),l=ec(ef,r),d=s.useRef(null),o=(0,h.useComposedRefs)(a,d),c=n.values.length,u=n.values.map(e=>eN(e,n.min,n.max)),m=c>1?Math.min(...u):0,x=100-Math.max(...u);return(0,t.jsx)(W.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...i,ref:o,style:{...e.style,[l.startEdge]:m+"%",[l.endEdge]:x+"%"}})});eg.displayName=ef;var ev="SliderThumb",ej=s.forwardRef((e,a)=>{let r=es(e.__scopeSlider),[i,n]=s.useState(null),l=(0,h.useComposedRefs)(a,e=>n(e)),d=s.useMemo(()=>i?r().findIndex(e=>e.ref.current===i):-1,[r,i]);return(0,t.jsx)(eb,{...e,ref:l,index:d})}),eb=s.forwardRef((e,a)=>{var r,i,n,l,d;let o,c,{__scopeSlider:u,index:m,name:p,...f}=e,g=el(ev,u),v=ec(ev,u),[j,y]=s.useState(null),N=(0,h.useComposedRefs)(a,e=>y(e)),w=!j||g.form||!!j.closest("form"),C=(0,b.useSize)(j),S=g.values[m],k=void 0===S?0:eN(S,g.min,g.max),R=(r=m,(i=g.values.length)>2?`Value ${r+1} of ${i}`:2===i?["Minimum","Maximum"][r]:void 0),A=C?.[v.size],P=A?(n=A,l=k,d=v.direction,c=ew([0,50],[0,o=n/2]),(o-c(l)*d)*d):0;return s.useEffect(()=>{if(j)return g.thumbs.add(j),()=>{g.thumbs.delete(j)}},[j,g.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[v.startEdge]:`calc(${k}% + ${P}px)`},children:[(0,t.jsx)(et.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(W.span,{role:"slider","aria-label":e["aria-label"]||R,"aria-valuemin":g.min,"aria-valuenow":S,"aria-valuemax":g.max,"aria-orientation":g.orientation,"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,tabIndex:g.disabled?void 0:0,...f,ref:N,style:void 0===S?{display:"none"}:e.style,onFocus:(0,x.composeEventHandlers)(e.onFocus,()=>{g.valueIndexToChangeRef.current=m})})}),w&&(0,t.jsx)(ey,{name:p??(g.name?g.name+(g.values.length>1?"[]":""):void 0),form:g.form,value:S},m)]})});ej.displayName=ev;var ey=s.forwardRef(({__scopeSlider:e,value:a,...r},i)=>{let n=s.useRef(null),l=(0,h.useComposedRefs)(n,i),d=(0,y.usePrevious)(a);return s.useEffect(()=>{let e=n.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(d!==a&&t){let s=new Event("input",{bubbles:!0});t.call(e,a),e.dispatchEvent(s)}},[d,a]),(0,t.jsx)(W.input,{style:{display:"none"},...r,ref:l,defaultValue:a})});function eN(e,t,s){return(0,G.clamp)(100/(s-t)*(e-t),[0,100])}function ew(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(s-e[0])}}ey.displayName="RadioBubbleInput",e.s(["Range",()=>eg,"Root",()=>ed,"Slider",()=>ed,"SliderRange",()=>eg,"SliderThumb",()=>ej,"SliderTrack",()=>ep,"Thumb",()=>ej,"Track",()=>ep,"createSliderScope",()=>ei],86976);var eC=e.i(86976),eC=eC;function eS({className:e,defaultValue:a,value:r,min:i=0,max:n=100,...l}){let d=s.useMemo(()=>Array.isArray(r)?r:Array.isArray(a)?a:[i,n],[r,a,i,n]);return(0,t.jsxs)(eC.Root,{"data-slot":"slider",defaultValue:a,value:r,min:i,max:n,className:(0,o.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...l,children:[(0,t.jsx)(eC.Track,{"data-slot":"slider-track",className:(0,o.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,t.jsx)(eC.Range,{"data-slot":"slider-range",className:(0,o.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,s)=>(0,t.jsx)(eC.Thumb,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}var ek=e.i(41868),eR=e.i(12061),eA=e.i(69501),eP=e.i(67289);let eD=[{value:"destroyed",label:"Destroyed",description:"Structure completely destroyed"},{value:"major",label:"Major",description:"Significant structural damage"},{value:"minor",label:"Minor",description:"Cosmetic or limited damage"},{value:"affected",label:"Affected",description:"In affected area, minor impact"},{value:"none",label:"None",description:"No damage observed"}];function eI({open:e,onOpenChange:i,incidentId:n,parcel:l}){let[d,o]=(0,s.useState)("minor"),[m,x]=(0,s.useState)([25]),[h,p]=(0,s.useState)([10]),[f,g]=(0,s.useState)(new Date().toISOString().split("T")[0]),[v,j]=(0,s.useState)(""),b=(0,eR.useSubmitSurvey)(),y=async()=>{try{await b.mutateAsync({incidentId:n,parcelId:l.affectedParcelId,survey:{damageLevel:d,improvementDamagePercent:m[0],landDamagePercent:h[0],surveyDate:f,notes:v}}),eA.toast.success("Damage survey submitted",{description:`Survey recorded for parcel ${l.apn}`}),i(!1)}catch(e){eA.toast.error("Failed to submit survey",{description:"Please try again"})}};return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:i,children:(0,t.jsxs)(a.DialogContent,{className:"sm:max-w-lg",children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsx)(a.DialogTitle,{children:"Damage Survey"}),(0,t.jsxs)(a.DialogDescription,{children:["Record damage assessment for parcel"," ",(0,t.jsx)("span",{className:"font-mono font-medium",children:l.apn})]})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(c,{className:"text-sm font-medium",children:"Damage Level"}),(0,t.jsx)(U,{value:d,onValueChange:o,children:eD.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 rounded-lg border p-3 cursor-pointer hover:bg-muted/50 transition-colors",children:[(0,t.jsx)(Q,{value:e.value,id:e.value}),(0,t.jsxs)(c,{htmlFor:e.value,className:"flex-1 cursor-pointer",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e.label}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c,{className:"text-sm font-medium",children:"Improvement Damage"}),(0,t.jsxs)("span",{className:"text-sm font-medium tabular-nums",children:[m[0],"%"]})]}),(0,t.jsx)(eS,{value:m,onValueChange:x,min:0,max:100,step:5,className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c,{className:"text-sm font-medium",children:"Land Damage"}),(0,t.jsxs)("span",{className:"text-sm font-medium tabular-nums",children:[h[0],"%"]})]}),(0,t.jsx)(eS,{value:h,onValueChange:p,min:0,max:100,step:5,className:"w-full"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c,{className:"text-sm font-medium",children:"Survey Date"}),(0,t.jsx)(ek.Input,{type:"date",value:f,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c,{className:"text-sm font-medium",children:"Notes"}),(0,t.jsx)(u,{value:v,onChange:e=>j(e.target.value),placeholder:"Additional observations...",rows:3})]})]}),(0,t.jsxs)(a.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,t.jsxs)(r.Button,{onClick:y,disabled:b.isPending,children:[b.isPending&&(0,t.jsx)(eP.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Submit Survey"]})]})]})})}e.s(["SurveyDialog",()=>eI],65241);var eM=e.i(48846),eL=e.i(94325);let eF=(0,eL.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var eE=e.i(36941);function eB({open:e,onOpenChange:i,incidentId:n,parcel:l}){let[d,o]=(0,s.useState)(null),c=(0,eR.useComputeReassessment)(),u=async()=>{try{let e=await c.mutateAsync({incidentId:n,parcelId:l.affectedParcelId});o(e),eA.toast.success("Reassessment computed",{description:`Value reduction of ${(0,eM.formatCurrency)(e.reductionAmount)} for parcel ${l.apn}`})}catch(e){eA.toast.error("Failed to compute reassessment",{description:"Please try again"})}};return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:i,children:(0,t.jsxs)(a.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsx)(a.DialogTitle,{children:"Reassessment"}),(0,t.jsxs)(a.DialogDescription,{children:["Compute revised values for parcel"," ",(0,t.jsx)("span",{className:"font-mono font-medium",children:l.apn})]})]}),d?(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-success",children:[(0,t.jsx)(eE.CheckCircle,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Reassessment Complete"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Prior Value"}),(0,t.jsx)("p",{className:"text-sm font-semibold tabular-nums",children:(0,eM.formatCurrency)(d.priorTotalValue)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Revised Value"}),(0,t.jsx)("p",{className:"text-sm font-semibold tabular-nums text-primary",children:(0,eM.formatCurrency)(d.revisedTotalValue)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Reduction"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)(eF,{className:"h-3.5 w-3.5 text-destructive"}),(0,t.jsx)("p",{className:"text-sm font-semibold tabular-nums text-destructive",children:(0,eM.formatCurrency)(d.reductionAmount)})]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-3 space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Land"}),(0,t.jsxs)("span",{children:[(0,eM.formatCurrency)(d.priorLandValue)," → ",(0,eM.formatCurrency)(d.revisedLandValue)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Improvements"}),(0,t.jsxs)("span",{children:[(0,eM.formatCurrency)(d.priorImprovementValue)," → ",(0,eM.formatCurrency)(d.revisedImprovementValue)]})]})]})]}):(0,t.jsx)("div",{className:"py-6 text-center",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"This will compute revised property values based on the recorded damage survey data. The computation uses standard calamity reassessment formulas."})}),(0,t.jsx)(a.DialogFooter,{children:d?(0,t.jsx)(r.Button,{onClick:()=>i(!1),children:"Done"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,t.jsxs)(r.Button,{onClick:u,disabled:c.isPending,children:[c.isPending&&(0,t.jsx)(eP.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Compute Reassessment"]})]})})]})})}e.s(["ReassessmentDialog",()=>eB],12618);let ez=(0,eL.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);e.s(["Calculator",()=>ez],1057)},28583,e=>{"use strict";var t=e.i(59834),s=e.i(42656),a=e.i(84707),r=e.i(52815),i=e.i(17896);function n({value:e,duration:a=500,formatFn:r=e=>e.toLocaleString(),className:i}){let[n,l]=(0,s.useState)(0),d=(0,s.useRef)(0),o=(0,s.useRef)(null),c=(0,s.useRef)(null);return(0,s.useEffect)(()=>{d.current=n,o.current=null;let t=s=>{o.current||(o.current=s);let r=Math.min((s-o.current)/a,1),i=1-Math.pow(1-r,3);l(Math.round(d.current+(e-d.current)*i)),r<1&&(c.current=requestAnimationFrame(t))};return c.current=requestAnimationFrame(t),()=>{c.current&&cancelAnimationFrame(c.current)}},[e,a]),(0,t.jsx)("span",{className:i,children:r(n)})}var l=e.i(17871),d=e.i(37243),o=e.i(65241),c=e.i(12618),u=e.i(25305),m=e.i(12061),x=e.i(48846),h=e.i(63219),p=e.i(39086),f=e.i(20828),g=e.i(46472),v=e.i(69833),j=e.i(40828),b=e.i(74182),y=e.i(1057),N=e.i(38104),w=e.i(54004),C=e.i(97468),S=e.i(68363),k=e.i(77393),R=e.i(59537),A=e.i(71809),P=e.i(91642),D=e.i(42650),I=e.i(33217),M=e.i(44261),L=e.i(79001),F=e.i(71908);function E(){let e=(0,D.useRouter)(),{user:E}=(0,h.useAuth)(),{role:B}=(0,p.useRole)(),{data:z,isLoading:O}=(0,u.useParcels)({page:1,pageSize:50}),{data:K,isLoading:T}=(0,m.useIncidents)(),[V,q]=(0,s.useState)(null),[$,_]=(0,s.useState)(null),H=K?.filter(e=>"active"===e.status)||[],U=K?.filter(e=>"monitoring"===e.status)||[],Q=H[0]||null,{data:G}=(0,m.useAffectedParcels)({incidentId:Q?.incidentId,pageSize:50}),W=U[0]||null,{data:X}=(0,m.useAffectedParcels)({incidentId:W?.incidentId,pageSize:50}),Y=[...G?.data||[],...X?.data||[]],J=Y.filter(e=>"pending"===e.surveyStatus||"in_progress"===e.surveyStatus).length,Z=Y.filter(e=>"completed"===e.surveyStatus&&("pending"===e.reassessmentStatus||"not_started"===e.reassessmentStatus)).length,ee=z?.pagination?.totalCount||0,et=z?.data||[],es=et.reduce((e,t)=>{var s;let a=(s=t.useCode).startsWith("01")||s.startsWith("02")?"Residential":s.startsWith("21")||s.startsWith("22")?"Agricultural":"Commercial";return e[a]=(e[a]||0)+(t.assessedValue||0),e},{}),ea=Object.values(es).reduce((e,t)=>e+t,0),er=Y.reduce((e,t)=>{let s=t.damageLevel||"pending";return e[s]=(e[s]||0)+1,e},{}),ei=[{level:"destroyed",count:er.destroyed||0,color:"#c4291c"},{level:"major",count:er.major||0,color:"#d97706"},{level:"minor",count:er.minor||0,color:"#ca8a04"},{level:"affected",count:er.affected||0,color:"#2563eb"},{level:"none",count:er.none||0,color:"#16a34a"},{level:"pending",count:er.pending||0,color:"#9ca3af"}],en={destroyed:0,major:1,minor:2,affected:3,none:4},el=Y.filter(e=>"pending"===e.surveyStatus||"in_progress"===e.surveyStatus||"completed"===e.surveyStatus&&("pending"===e.reassessmentStatus||"not_started"===e.reassessmentStatus)).sort((e,t)=>(e.damageLevel?en[e.damageLevel]??5:6)-(t.damageLevel?en[t.damageLevel]??5:6)).slice(0,6),ed=E?.assignedParcelIds||[],eo=et.filter(e=>ed.includes(e.parcelId)),ec=Y.filter(e=>ed.includes(e.parcelId)),eu=ec.filter(e=>"pending"===e.surveyStatus||"in_progress"===e.surveyStatus),em=ec.filter(e=>"completed"===e.surveyStatus&&("pending"===e.reassessmentStatus||"not_started"===e.reassessmentStatus)),ex=ec.filter(e=>"completed"===e.surveyStatus);return"appraiser"===B?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-semibold tracking-tight",children:["Good ",12>new Date().getHours()?"morning":17>new Date().getHours()?"afternoon":"evening",", ",E?.name?.split(" ")[0]||"Appraiser"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Here's your work queue for today"})]}),!T&&H.length>0&&(0,t.jsx)("div",{className:"rounded-xl border border-destructive/30 bg-destructive/5 p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-destructive/15 text-destructive",children:(0,t.jsx)(b.AlertTriangle,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-destructive",children:["Active Calamity — ",H[0]?.name]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["You have ",eu.length," survey",1!==eu.length?"s":""," assigned"]})]}),(0,t.jsx)(I.default,{href:"/calamity",className:"shrink-0",children:(0,t.jsx)(M.Button,{variant:"outline",size:"sm",className:"h-7 text-xs border-destructive/30 text-destructive hover:bg-destructive/10",children:"View details"})})]})}),(0,t.jsxs)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(a.KpiCard,{title:"My Parcels",value:O?"...":(0,t.jsx)(n,{value:eo.length,formatFn:x.formatNumber}),icon:f.Map,isLoading:O,href:"/parcels"}),(0,t.jsx)(a.KpiCard,{title:"Pending Surveys",value:T?"...":(0,t.jsx)(n,{value:eu.length,formatFn:x.formatNumber}),icon:v.FileSearch,isLoading:T,href:"/calamity"}),(0,t.jsx)(a.KpiCard,{title:"Pending Reassessments",value:T?"...":(0,t.jsx)(n,{value:em.length,formatFn:x.formatNumber}),icon:y.Calculator,isLoading:T,href:"/calamity"}),(0,t.jsx)(a.KpiCard,{title:"Completed",value:T?"...":(0,t.jsx)(n,{value:ex.length,formatFn:x.formatNumber}),icon:k.CheckCircle2,isLoading:T})]}),(0,t.jsxs)("div",{className:"rounded-xl border bg-card shadow-sm",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-5 pb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.ClipboardList,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("h2",{className:"text-base font-semibold",children:"My Work Queue"}),eu.length+em.length>0&&(0,t.jsxs)(F.Badge,{variant:"secondary",className:"text-[10px]",children:[eu.length+em.length," pending"]})]})}),(0,t.jsx)("div",{className:"p-5 pt-3",children:T?(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:3}).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-9 w-9 rounded-lg bg-muted animate-pulse"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1.5",children:[(0,t.jsx)("div",{className:"h-3.5 w-[180px] rounded bg-muted animate-pulse"}),(0,t.jsx)("div",{className:"h-3 w-[120px] rounded bg-muted animate-pulse"})]})]},s))}):eu.length+em.length===0?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 mx-auto items-center justify-center rounded-full bg-success/10 text-success mb-3",children:(0,t.jsx)(k.CheckCircle2,{className:"h-5 w-5"})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"All caught up!"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"No pending surveys or reassessments in your queue"})]}):(0,t.jsxs)("div",{className:"space-y-1.5",children:[eu.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-lg px-3 py-2.5 transition-colors border-l-[3px] border-l-warning/70 bg-warning/[0.03] hover:bg-warning/[0.06]",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-background border",children:(0,t.jsx)(v.FileSearch,{className:"h-4 w-4 text-warning"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.default,{href:`/parcels/${e.parcelId}`,className:"text-sm font-medium font-mono hover:text-primary transition-colors",children:(0,x.formatApn)(e.apn)}),e.damageLevel&&(0,t.jsx)(r.DamageBadge,{level:e.damageLevel}),(0,t.jsx)(F.Badge,{variant:"outline",className:"text-[10px] text-warning border-warning/30",children:"Survey needed"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.primaryAddress||"—"})]}),(0,t.jsxs)(M.Button,{variant:"outline",size:"sm",className:"h-7 text-xs shrink-0",onClick:()=>q({incidentId:e.incidentId,parcel:e}),children:[(0,t.jsx)(v.FileSearch,{className:"h-3 w-3 mr-1"}),"Survey"]})]},e.affectedParcelId)),em.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-lg px-3 py-2.5 transition-colors border-l-[3px] border-l-info/70 bg-info/[0.03] hover:bg-info/[0.06]",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-background border",children:(0,t.jsx)(y.Calculator,{className:"h-4 w-4 text-info"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.default,{href:`/parcels/${e.parcelId}`,className:"text-sm font-medium font-mono hover:text-primary transition-colors",children:(0,x.formatApn)(e.apn)}),e.damageLevel&&(0,t.jsx)(r.DamageBadge,{level:e.damageLevel}),(0,t.jsx)(F.Badge,{variant:"outline",className:"text-[10px] text-info border-info/30",children:"Reassess"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.primaryAddress||"—"})]}),(0,t.jsxs)(M.Button,{variant:"outline",size:"sm",className:"h-7 text-xs shrink-0",onClick:()=>_({incidentId:e.incidentId,parcel:e}),children:[(0,t.jsx)(y.Calculator,{className:"h-3 w-3 mr-1"}),"Reassess"]})]},e.affectedParcelId))]})})]}),(0,t.jsxs)("div",{className:"rounded-xl border bg-card shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-5 pb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold",children:"My Assigned Parcels"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-0.5",children:[eo.length," parcel",1!==eo.length?"s":""," in your portfolio"]})]}),(0,t.jsxs)(I.default,{href:"/parcels",className:"text-xs text-primary hover:text-primary/80 font-medium flex items-center gap-1",children:["View all",(0,t.jsx)(j.ArrowRight,{className:"h-3 w-3"})]})]}),(0,t.jsx)("div",{className:"p-5 pt-3",children:O?(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:3}).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-9 w-9 rounded-lg bg-muted animate-pulse"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1.5",children:[(0,t.jsx)("div",{className:"h-3.5 w-[200px] rounded bg-muted animate-pulse"}),(0,t.jsx)("div",{className:"h-3 w-[120px] rounded bg-muted animate-pulse"})]})]},s))}):0===eo.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No parcels assigned"})}):(0,t.jsx)("div",{className:"space-y-1",children:eo.map(s=>(0,t.jsxs)("button",{onClick:()=>e.push(`/parcels/${s.parcelId}`),className:"w-full flex items-center gap-3 rounded-lg px-3 py-2.5 hover:bg-muted/50 transition-colors text-left",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary",children:(0,t.jsx)(f.Map,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium font-mono",children:(0,x.formatApn)(s.apn)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:s.primaryAddress||s.useDescription})]}),(0,t.jsx)("span",{className:"text-sm font-medium tabular-nums text-muted-foreground",children:(0,x.formatCurrency)(s.assessedValue)})]},s.parcelId))})})]}),V&&(0,t.jsx)(o.SurveyDialog,{open:!!V,onOpenChange:e=>!e&&q(null),incidentId:V.incidentId,parcel:V.parcel}),$&&(0,t.jsx)(c.ReassessmentDialog,{open:!!$,onOpenChange:e=>!e&&_(null),incidentId:$.incidentId,parcel:$.parcel})]}):"executive"===B?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Executive Overview"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Madera County Assessor's Office — ",new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),!T&&H.length>0&&(0,t.jsx)("div",{className:"rounded-xl border border-destructive/30 bg-destructive/5 p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-destructive/15 text-destructive",children:(0,t.jsx)(b.AlertTriangle,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-destructive",children:"Active Calamity"}),H.map(e=>(0,t.jsxs)("p",{className:"text-sm mt-1",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:[" ","— ",e.affectedParcelCount," parcels affected"]})]},e.incidentId))]}),(0,t.jsx)(I.default,{href:"/reports/calamity-impact",children:(0,t.jsxs)(M.Button,{variant:"outline",size:"sm",className:"h-7 text-xs border-destructive/30 text-destructive hover:bg-destructive/10",children:[(0,t.jsx)(C.FileBarChart,{className:"h-3 w-3 mr-1"}),"Impact Report"]})})]})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(a.KpiCard,{title:"Total Parcels",value:O?"...":(0,t.jsx)(n,{value:ee,formatFn:x.formatNumber}),icon:f.Map,isLoading:O}),(0,t.jsx)(a.KpiCard,{title:"Total Assessed Value",value:O?"...":(0,t.jsx)(n,{value:ea,formatFn:x.formatCurrency}),icon:N.DollarSign,isLoading:O}),(0,t.jsx)(a.KpiCard,{title:"Active Incidents",value:T?"...":(0,t.jsx)(n,{value:H.length,formatFn:x.formatNumber}),icon:g.Flame,isLoading:T}),(0,t.jsx)(a.KpiCard,{title:"Affected Parcels",value:T?"...":(0,t.jsx)(n,{value:Y.length,formatFn:x.formatNumber}),icon:b.AlertTriangle,isLoading:T})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsx)(L.Card,{className:"shadow-sm",children:(0,t.jsxs)(L.CardContent,{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground mb-4",children:[(0,t.jsx)(R.TrendingUp,{className:"h-4 w-4"}),"Assessed Value by Property Type"]}),!O&&ea>0?(0,t.jsx)(d.ValueBreakdownBar,{total:ea,segments:[{label:"Residential",value:es.Residential||0,color:"#2563eb"},{label:"Agricultural",value:es.Agricultural||0,color:"#16a34a"},{label:"Commercial",value:es.Commercial||0,color:"#d97706"}]}):(0,t.jsx)("div",{className:"h-20 flex items-center justify-center",children:(0,t.jsx)("div",{className:"h-6 w-full rounded bg-muted animate-pulse"})})]})}),Y.length>0&&(0,t.jsx)(L.Card,{className:"shadow-sm",children:(0,t.jsxs)(L.CardContent,{className:"p-5",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Calamity Damage Assessment"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"All incidents combined"}),(0,t.jsx)(l.DamageDonutChart,{data:ei,total:Y.length}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-x-2 gap-y-1.5 mt-3",children:ei.filter(e=>e.count>0).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"inline-block h-2 w-2 rounded-full shrink-0",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground capitalize truncate",children:"pending"===e.level?"Pending":e.level}),(0,t.jsx)("span",{className:"text-[10px] font-medium",children:e.count})]},e.level))})]})})]}),(0,t.jsxs)("div",{className:"rounded-xl border bg-card shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-5 pb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.FileBarChart,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Reports"})]}),(0,t.jsxs)(I.default,{href:"/reports",className:"text-xs text-primary hover:text-primary/80 font-medium flex items-center gap-1",children:["All reports",(0,t.jsx)(j.ArrowRight,{className:"h-3 w-3"})]})]}),(0,t.jsxs)("div",{className:"grid gap-3 p-5 pt-3 sm:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsxs)(I.default,{href:"/reports/calamity-impact",className:"rounded-lg border p-4 hover:bg-muted/50 transition-colors group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-destructive/10 text-destructive",children:(0,t.jsx)(g.Flame,{className:"h-4 w-4"})}),(0,t.jsx)("h3",{className:"text-sm font-medium group-hover:text-primary transition-colors",children:"Calamity Impact"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Board of Supervisors briefing on calamity response and property value impact"}),(0,t.jsxs)("div",{className:"flex gap-1.5 mt-2",children:[(0,t.jsx)(F.Badge,{variant:"secondary",className:"text-[10px]",children:"Board"}),(0,t.jsx)(F.Badge,{variant:"secondary",className:"text-[10px]",children:"BOE"})]})]}),(0,t.jsxs)(I.default,{href:"/reports/roll-summary",className:"rounded-lg border p-4 hover:bg-muted/50 transition-colors group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-info/10 text-info",children:(0,t.jsx)(A.BarChart3,{className:"h-4 w-4"})}),(0,t.jsx)("h3",{className:"text-sm font-medium group-hover:text-primary transition-colors",children:"Assessment Roll"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Auditor-Controller roll summary with property type breakdown"}),(0,t.jsx)("div",{className:"flex gap-1.5 mt-2",children:(0,t.jsx)(F.Badge,{variant:"secondary",className:"text-[10px]",children:"Auditor"})})]}),(0,t.jsxs)(I.default,{href:"/reports/staff-workload",className:"rounded-lg border p-4 hover:bg-muted/50 transition-colors group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-warning/10 text-warning",children:(0,t.jsx)(P.Users,{className:"h-4 w-4"})}),(0,t.jsx)("h3",{className:"text-sm font-medium group-hover:text-primary transition-colors",children:"Staff Workload"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Supervisor overview of pending surveys and reassessment queue"}),(0,t.jsx)("div",{className:"flex gap-1.5 mt-2",children:(0,t.jsx)(F.Badge,{variant:"secondary",className:"text-[10px]",children:"Internal"})})]})]})]}),(0,t.jsx)(L.Card,{className:"shadow-sm border-primary/20 bg-gradient-to-r from-primary/[0.03] to-transparent",children:(0,t.jsx)(L.CardContent,{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-primary/10 text-primary",children:(0,t.jsx)(S.Bot,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",children:"CalProp AI Agents"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Automate damage classification, comp sales analysis, and BOE appeal drafting"})]})]}),(0,t.jsx)(I.default,{href:"/ai-agents",children:(0,t.jsxs)(M.Button,{variant:"outline",size:"sm",className:"h-8 text-xs",children:["View agents",(0,t.jsx)(j.ArrowRight,{className:"h-3 w-3 ml-1"})]})})]})})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Madera County Assessor's Office"})]}),!T&&H.length>0&&(0,t.jsx)("div",{className:"rounded-xl border border-destructive/30 bg-destructive/5 p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-destructive/15 text-destructive",children:(0,t.jsx)(b.AlertTriangle,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-destructive",children:"Active Calamity"}),(0,t.jsxs)(F.Badge,{variant:"outline",className:"text-[10px] border-destructive/30 text-destructive",children:[H.length," active"]})]}),H.map(e=>(0,t.jsxs)(I.default,{href:`/calamity/incidents/${e.incidentId}`,className:"group block mt-1.5",children:[(0,t.jsxs)("p",{className:"text-sm font-medium group-hover:text-primary transition-colors",children:[e.name,(0,t.jsxs)("span",{className:"text-muted-foreground font-normal",children:[" ","— ",e.affectedParcelCount," parcels affected"]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:e.description})]},e.incidentId))]}),(0,t.jsxs)(I.default,{href:"/calamity",className:"shrink-0 text-xs text-destructive hover:text-destructive/80 font-medium flex items-center gap-1 mt-0.5",children:["View all",(0,t.jsx)(j.ArrowRight,{className:"h-3 w-3"})]})]})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(a.KpiCard,{title:"Total Parcels",value:O?"...":(0,t.jsx)(n,{value:ee,formatFn:x.formatNumber}),icon:f.Map,isLoading:O,href:"/parcels"}),(0,t.jsx)(a.KpiCard,{title:"Assessed Value",value:O?"...":(0,t.jsx)(n,{value:ea,formatFn:x.formatCurrency}),icon:N.DollarSign,isLoading:O,href:"/parcels"}),(0,t.jsx)(a.KpiCard,{title:"Pending Surveys",value:T?"...":(0,t.jsx)(n,{value:J,formatFn:x.formatNumber}),icon:v.FileSearch,isLoading:T,href:"/calamity"}),(0,t.jsx)(a.KpiCard,{title:"Pending Reassessments",value:T?"...":(0,t.jsx)(n,{value:Z,formatFn:x.formatNumber}),icon:y.Calculator,isLoading:T,href:"/calamity"})]}),!O&&ea>0&&(0,t.jsx)(L.Card,{className:"shadow-sm",children:(0,t.jsxs)(L.CardContent,{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground mb-4",children:[(0,t.jsx)(N.DollarSign,{className:"h-4 w-4"}),"Assessed Value by Property Type"]}),(0,t.jsx)(d.ValueBreakdownBar,{total:ea,segments:[{label:"Residential",value:es.Residential||0,color:"#2563eb"},{label:"Agricultural",value:es.Agricultural||0,color:"#16a34a"},{label:"Commercial",value:es.Commercial||0,color:"#d97706"}]})]})}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-5",children:[(0,t.jsxs)("div",{className:"lg:col-span-3 rounded-xl border bg-card shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-5 pb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Needs Attention"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Parcels requiring survey or reassessment action"})]}),(0,t.jsxs)(I.default,{href:"/calamity",className:"text-xs text-primary hover:text-primary/80 font-medium flex items-center gap-1",children:["View all",(0,t.jsx)(j.ArrowRight,{className:"h-3 w-3"})]})]}),(0,t.jsx)("div",{className:"p-5 pt-3",children:T?(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:4}).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-9 w-9 rounded-lg bg-muted animate-pulse"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1.5",children:[(0,t.jsx)("div",{className:"h-3.5 w-[180px] rounded bg-muted animate-pulse"}),(0,t.jsx)("div",{className:"h-3 w-[120px] rounded bg-muted animate-pulse"})]})]},s))}):0===el.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 mx-auto items-center justify-center rounded-full bg-success/10 text-success mb-3",children:(0,t.jsx)(v.FileSearch,{className:"h-5 w-5"})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"All caught up"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"No parcels need immediate attention"})]}):(0,t.jsx)("div",{className:"space-y-1.5",children:el.map(e=>{let s="pending"===e.surveyStatus||"in_progress"===e.surveyStatus;return(0,t.jsxs)("div",{className:`flex items-center gap-3 rounded-lg px-3 py-2.5 transition-colors border-l-[3px] ${s?"border-l-warning/70 bg-warning/[0.03] hover:bg-warning/[0.06]":"border-l-info/70 bg-info/[0.03] hover:bg-info/[0.06]"}`,children:[(0,t.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-background border",children:s?(0,t.jsx)(v.FileSearch,{className:"h-4 w-4 text-warning"}):(0,t.jsx)(y.Calculator,{className:"h-4 w-4 text-info"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.default,{href:`/parcels/${e.parcelId}`,className:"text-sm font-medium font-mono hover:text-primary transition-colors",children:(0,x.formatApn)(e.apn)}),e.damageLevel&&(0,t.jsx)(r.DamageBadge,{level:e.damageLevel})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.primaryAddress||"—"})]}),s?(0,t.jsxs)(M.Button,{variant:"outline",size:"sm",className:"h-7 text-xs shrink-0",onClick:()=>q({incidentId:e.incidentId,parcel:e}),children:[(0,t.jsx)(v.FileSearch,{className:"h-3 w-3 mr-1"}),"Survey"]}):(0,t.jsxs)(M.Button,{variant:"outline",size:"sm",className:"h-7 text-xs shrink-0",onClick:()=>_({incidentId:e.incidentId,parcel:e}),children:[(0,t.jsx)(y.Calculator,{className:"h-3 w-3 mr-1"}),"Reassess"]})]},e.affectedParcelId)})})})]}),(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[Y.length>0&&(0,t.jsx)(L.Card,{className:"shadow-sm",children:(0,t.jsxs)(L.CardContent,{className:"p-5",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Damage Assessment"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"All incidents combined"}),(0,t.jsx)(l.DamageDonutChart,{data:ei,total:Y.length}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-x-2 gap-y-1.5 mt-3",children:ei.filter(e=>e.count>0).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"inline-block h-2 w-2 rounded-full shrink-0",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground capitalize truncate",children:"pending"===e.level?"Pending":e.level}),(0,t.jsx)("span",{className:"text-[10px] font-medium",children:e.count})]},e.level))})]})}),(0,t.jsxs)("div",{className:"rounded-xl border bg-card shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-5 pb-2",children:[(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Incidents"}),(0,t.jsxs)(I.default,{href:"/calamity",className:"text-xs text-primary hover:text-primary/80 font-medium flex items-center gap-1",children:["View all",(0,t.jsx)(j.ArrowRight,{className:"h-3 w-3"})]})]}),(0,t.jsx)("div",{className:"p-5 pt-3",children:T?(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:2}).map((e,s)=>(0,t.jsx)("div",{className:"h-16 rounded-lg bg-muted animate-pulse"},s))}):K&&0!==K.length?(0,t.jsx)("div",{className:"space-y-2",children:K.map(e=>(0,t.jsxs)(I.default,{href:`/calamity/incidents/${e.incidentId}`,className:"block rounded-lg border p-3 hover:bg-muted/50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,t.jsx)(g.Flame,{className:"h-3.5 w-3.5 text-destructive shrink-0"}),(0,t.jsx)("span",{className:"text-sm font-medium truncate",children:e.name})]}),(0,t.jsx)(i.StatusBadge,{status:e.status})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1.5 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:[e.affectedParcelCount," parcels"]}),(0,t.jsx)("span",{className:"capitalize",children:e.incidentType})]})]},e.incidentId))}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-6",children:"No incidents reported"})})]})]})]}),(0,t.jsxs)("div",{className:"rounded-xl border bg-card shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-5 pb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Recent Parcels"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Latest parcel activity"})]}),(0,t.jsxs)(I.default,{href:"/parcels",className:"text-xs text-primary hover:text-primary/80 font-medium flex items-center gap-1",children:["View all",(0,t.jsx)(j.ArrowRight,{className:"h-3 w-3"})]})]}),(0,t.jsx)("div",{className:"p-5 pt-3",children:O?(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-9 w-9 rounded-lg bg-muted animate-pulse"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1.5",children:[(0,t.jsx)("div",{className:"h-3.5 w-[200px] rounded bg-muted animate-pulse"}),(0,t.jsx)("div",{className:"h-3 w-[120px] rounded bg-muted animate-pulse"})]}),(0,t.jsx)("div",{className:"h-3 w-[80px] rounded bg-muted animate-pulse"})]},s))}):0===et.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No parcels found"}):(0,t.jsx)("div",{className:"space-y-1",children:et.slice(0,5).map(s=>(0,t.jsxs)("button",{onClick:()=>e.push(`/parcels/${s.parcelId}`),className:"w-full flex items-center gap-3 rounded-lg px-3 py-2.5 hover:bg-muted/50 transition-colors text-left",children:[(0,t.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary",children:(0,t.jsx)(f.Map,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium font-mono",children:(0,x.formatApn)(s.apn)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:s.primaryAddress||s.useDescription})]}),(0,t.jsx)("span",{className:"text-sm font-medium tabular-nums text-muted-foreground",children:(0,x.formatCurrency)(s.assessedValue)})]},s.parcelId))})})]}),V&&(0,t.jsx)(o.SurveyDialog,{open:!!V,onOpenChange:e=>!e&&q(null),incidentId:V.incidentId,parcel:V.parcel}),$&&(0,t.jsx)(c.ReassessmentDialog,{open:!!$,onOpenChange:e=>!e&&_(null),incidentId:$.incidentId,parcel:$.parcel})]})}e.s(["default",()=>E],28583)}]);