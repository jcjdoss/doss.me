(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25305,e=>{"use strict";var t=e.i(42828),s=e.i(85398);function r(e){return(0,t.useQuery)({queryKey:["parcels",e],queryFn:()=>(0,s.apiFetch)("/v1/parcels",{params:{search:e.search,status:e.status,page:e.page||1,pageSize:e.pageSize||20}})})}function i(e){return(0,t.useQuery)({queryKey:["parcel",e],queryFn:()=>(0,s.apiFetch)(`/v1/parcels/${e}`),enabled:!!e})}function a(e){return(0,t.useQuery)({queryKey:["parcel-flags",e],queryFn:()=>(0,s.apiFetch)(`/v1/parcels/${e}/flags`),enabled:!!e})}e.s(["useParcel",()=>i,"useParcelFlags",()=>a,"useParcels",()=>r])},17896,50875,e=>{"use strict";var t=e.i(59834),s=e.i(71908),r=e.i(22513);let i={active:"bg-success/15 text-success border-success/20",inactive:"bg-muted text-muted-foreground border-muted",pending:"bg-warning/15 text-warning border-warning/20",archived:"bg-muted text-muted-foreground border-muted",monitoring:"bg-info/15 text-info border-info/20",closed:"bg-muted text-muted-foreground border-muted"};function a({status:e,className:a}){let n=i[e.toLowerCase()]||"bg-muted text-muted-foreground border-muted";return(0,t.jsxs)(s.Badge,{variant:"outline",className:(0,r.cn)("font-medium capitalize text-[11px] px-2 py-0.5",n,a),children:[(0,t.jsx)("span",{className:"mr-1.5 inline-block h-1.5 w-1.5 rounded-full bg-current"}),e.replace(/_/g," ")]})}e.s(["damageLevelColors",0,{destroyed:"bg-destructive/15 text-destructive border-destructive/20",major:"bg-[oklch(0.7_0.15_40)]/15 text-[oklch(0.55_0.18_40)] border-[oklch(0.7_0.15_40)]/20",minor:"bg-warning/15 text-warning border-warning/20",affected:"bg-info/15 text-info border-info/20",inaccessible:"bg-muted text-muted-foreground border-muted",none:"bg-success/15 text-success border-success/20"},"incidentTypeLabels",0,{wildfire:"Wildfire",flood:"Flood",earthquake:"Earthquake",mudslide:"Mudslide",hurricane:"Hurricane",tornado:"Tornado",other:"Other"},"statusColors",0,i],50875),e.s(["StatusBadge",()=>a],17896)},79001,e=>{"use strict";var t=e.i(59834),s=e.i(22513);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function a({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>n,"CardHeader",()=>i,"CardTitle",()=>a])},48846,e=>{"use strict";let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2});let s=new Intl.NumberFormat("en-US");function r(e){return t.format(e)}function i(e){return s.format(e)}function a(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function n(e){let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3),r=Math.floor(s/60),i=Math.floor(r/60),n=Math.floor(i/24);return s<60?"just now":r<60?1===r?"1 min ago":r+" min ago":i<24?1===i?"1 hr ago":i+" hrs ago":n<7?1===n?"1 day ago":n+" days ago":a(e)}function c(e){return e}function o(e){return e<1?e.toFixed(2)+" ac":s.format(e)+" ac"}new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1}),e.s(["formatAcreage",()=>o,"formatApn",()=>c,"formatCurrency",()=>r,"formatDate",()=>a,"formatNumber",()=>i,"formatRelativeTime",()=>n])},12061,69833,e=>{"use strict";var t=e.i(42828),s=e.i(42656),r=e.i(93312),i=e.i(77456),a=e.i(54368),n=e.i(12674),c=class extends a.Subscribable{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,n.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,n.hashKey)(t.mutationKey)!==(0,n.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){let e=this.#s?.state??(0,r.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){i.notifyManager.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#r.onSuccess?.(e.data,t,s,r)}catch(e){Promise.reject(e)}try{this.#r.onSettled?.(e.data,null,t,s,r)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#r.onError?.(e.error,t,s,r)}catch(e){Promise.reject(e)}try{this.#r.onSettled?.(void 0,e.error,t,s,r)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},o=e.i(73252);function u(e,t){let r=(0,o.useQueryClient)(t),[a]=s.useState(()=>new c(r,e));s.useEffect(()=>{a.setOptions(e)},[a,e]);let u=s.useSyncExternalStore(s.useCallback(e=>a.subscribe(i.notifyManager.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),d=s.useCallback((e,t)=>{a.mutate(e,t).catch(n.noop)},[a]);if(u.error&&(0,n.shouldThrowError)(a.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:d,mutateAsync:u.mutate}}var d=e.i(85398);function l(e){return(0,t.useQuery)({queryKey:["incidents",e],queryFn:()=>(0,d.apiFetch)("/v1/calamity/incidents",{params:{status:e}})})}function m(e){return(0,t.useQuery)({queryKey:["incident",e],queryFn:()=>(0,d.apiFetch)(`/v1/calamity/incidents/${e}`),enabled:!!e})}function h(e){return(0,t.useQuery)({queryKey:["affected-parcels",e],queryFn:()=>(0,d.apiFetch)(`/v1/calamity/incidents/${e.incidentId}/parcels`,{params:{page:e.page||1,pageSize:e.pageSize||20,damageLevel:e.damageLevel}}),enabled:!!e.incidentId})}function p(){let e=(0,o.useQueryClient)();return u({mutationFn:({incidentId:e,parcelId:t,survey:s})=>(0,d.apiFetch)(`/v1/calamity/incidents/${e}/parcels/${t}/survey`,{method:"POST",body:s}),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["affected-parcels"]}),e.invalidateQueries({queryKey:["incident",s.incidentId]})}})}function g(){let e=(0,o.useQueryClient)();return u({mutationFn:({incidentId:e,parcelId:t})=>(0,d.apiFetch)(`/v1/calamity/incidents/${e}/parcels/${t}/reassess`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["affected-parcels"]})}})}e.s(["useAffectedParcels",()=>h,"useComputeReassessment",()=>g,"useIncident",()=>m,"useIncidents",()=>l,"useSubmitSurvey",()=>p],12061);let f=(0,e.i(94325).default)("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]);e.s(["FileSearch",()=>f],69833)},84707,e=>{"use strict";var t=e.i(59834),s=e.i(79001),r=e.i(80612),i=e.i(22513);function a({title:e,value:a,icon:n,description:c,trend:o,isLoading:u=!1,className:d}){return(0,t.jsx)(s.Card,{className:(0,i.cn)("shadow-sm",d),children:(0,t.jsxs)(s.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[n&&(0,t.jsx)(n,{className:"h-4 w-4"}),e]}),(0,t.jsxs)("div",{className:"mt-3 flex items-baseline gap-2",children:[u?(0,t.jsx)(r.Skeleton,{className:"h-8 w-24"}):(0,t.jsx)("span",{className:"text-2xl font-bold tracking-tight",children:a}),o&&!u&&(0,t.jsxs)("span",{className:(0,i.cn)("text-xs font-medium",o.isPositive?"text-success":"text-destructive"),children:[o.isPositive?"+":"",o.value,"%"]})]}),c&&(0,t.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:c})]})})}e.s(["KpiCard",()=>a])},28583,e=>{"use strict";var t=e.i(59834),s=e.i(84707),r=e.i(25305),i=e.i(12061),a=e.i(48846),n=e.i(20828),c=e.i(46472),o=e.i(69833);let u=(0,e.i(94325).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var d=e.i(42650),l=e.i(33217),m=e.i(17896);function h(){let e=(0,d.useRouter)(),{data:h,isLoading:p}=(0,r.useParcels)({page:1,pageSize:5}),{data:g,isLoading:f}=(0,i.useIncidents)(),x=h?.pagination?.totalCount||0,y=g?.filter(e=>"active"===e.status).length||0,b=h?.data||[];return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Madera County property tax assessments overview"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsx)(s.KpiCard,{title:"Total Parcels",value:(0,a.formatNumber)(x),icon:n.Map,isLoading:p,description:"Registered property parcels"}),(0,t.jsx)(s.KpiCard,{title:"Active Incidents",value:(0,a.formatNumber)(y),icon:c.Flame,isLoading:f,description:"Calamity events being monitored"}),(0,t.jsx)(s.KpiCard,{title:"Pending Surveys",value:"â€”",icon:o.FileSearch,isLoading:!1,description:"Damage assessments awaiting review"})]}),(0,t.jsxs)("div",{className:"rounded-xl border bg-card shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 pb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Parcels"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Latest parcels in the system"})]}),(0,t.jsxs)(l.default,{href:"/parcels",className:"text-sm text-primary hover:text-primary/80 font-medium flex items-center gap-1",children:["View all",(0,t.jsx)(u,{className:"h-3.5 w-3.5"})]})]}),(0,t.jsx)("div",{className:"p-6 pt-4",children:p?(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-lg bg-muted animate-pulse"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("div",{className:"h-4 w-[200px] rounded bg-muted animate-pulse"}),(0,t.jsx)("div",{className:"h-3 w-[120px] rounded bg-muted animate-pulse"})]}),(0,t.jsx)("div",{className:"h-3 w-[60px] rounded bg-muted animate-pulse"})]},s))}):0===b.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No parcels found"}):(0,t.jsx)("div",{className:"space-y-1",children:b.map(s=>(0,t.jsxs)("button",{onClick:()=>e.push(`/parcels/${s.parcelId}`),className:"w-full flex items-center gap-4 rounded-lg px-3 py-2.5 hover:bg-muted/50 transition-colors text-left",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary",children:(0,t.jsx)(n.Map,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium font-mono",children:(0,a.formatApn)(s.apn)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:s.primaryAddress||s.useDescription})]}),(0,t.jsx)(m.StatusBadge,{status:s.status})]},s.parcelId))})})]})]})}e.s(["default",()=>h],28583)}]);