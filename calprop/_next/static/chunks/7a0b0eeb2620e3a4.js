(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71908,e=>{"use strict";var t=e.i(59834),a=e.i(79448),s=e.i(78961),r=e.i(22513);let i=(0,a.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a="default",asChild:l=!1,...n}){let d=l?s.Slot.Root:"span";return(0,t.jsx)(d,{"data-slot":"badge","data-variant":a,className:(0,r.cn)(i({variant:a}),e),...n})}e.s(["Badge",()=>l])},79001,e=>{"use strict";var t=e.i(59834),a=e.i(22513);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardHeader",()=>r,"CardTitle",()=>i])},93749,e=>{"use strict";var t=e.i(59834),a=e.i(80612),s=e.i(22513);function r({className:e}){return(0,t.jsxs)("div",{className:(0,s.cn)("rounded-xl border bg-card p-6 shadow-sm space-y-4",e),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Skeleton,{className:"h-4 w-4 rounded"}),(0,t.jsx)(a.Skeleton,{className:"h-4 w-24"})]}),(0,t.jsx)(a.Skeleton,{className:"h-8 w-20"}),(0,t.jsx)(a.Skeleton,{className:"h-3 w-32"})]})}function i({className:e}){return(0,t.jsxs)("div",{className:(0,s.cn)("space-y-6",e),children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(a.Skeleton,{className:"h-8 w-64"}),(0,t.jsx)(a.Skeleton,{className:"h-4 w-40"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsx)(r,{}),(0,t.jsx)(r,{})]})]})}e.s(["CardSkeleton",()=>r,"DetailSkeleton",()=>i])},43970,e=>{"use strict";let t=(0,e.i(94325).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],43970)},83685,e=>{"use strict";let t=(0,e.i(94325).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],83685)},31906,e=>{"use strict";var t=e.i(59834),a=e.i(22513),s=e.i(44261);function r({icon:e,title:r,description:i,action:l,className:n}){return(0,t.jsxs)("div",{className:(0,a.cn)("flex flex-col items-center justify-center py-12 text-center",n),children:[e&&(0,t.jsx)("div",{className:"rounded-full bg-muted p-4 mb-4",children:(0,t.jsx)(e,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"text-base font-semibold",children:r}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground max-w-sm",children:i}),l&&(0,t.jsx)(s.Button,{onClick:l.onClick,className:"mt-4",size:"sm",children:l.label})]})}e.s(["EmptyState",()=>r])},41868,e=>{"use strict";var t=e.i(59834),a=e.i(22513);function s({className:e,type:s,...r}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},71579,e=>{"use strict";function t(e,[t,a]){return Math.min(a,Math.max(t,e))}e.s(["clamp",()=>t])},38798,e=>{"use strict";var t=e.i(42656);function a(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},45152,e=>{"use strict";var t=e.i(59834),a=e.i(22513);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function r({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function i({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function l({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function n({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function d({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>i,"TableCell",()=>d,"TableHead",()=>n,"TableHeader",()=>r,"TableRow",()=>l])},45388,e=>{"use strict";let t=(0,e.i(94325).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],45388)},36941,e=>{"use strict";let t=(0,e.i(94325).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],36941)},69833,e=>{"use strict";let t=(0,e.i(94325).default)("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]);e.s(["FileSearch",()=>t],69833)},74182,e=>{"use strict";let t=(0,e.i(94325).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],74182)},75482,e=>{"use strict";let t=(0,e.i(94325).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],75482)},22658,86520,e=>{"use strict";var t=e.i(94325);let a=(0,t.default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);e.s(["Droplets",()=>a],22658);let s=(0,t.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>s],86520)},25933,e=>{"use strict";var t=e.i(59834),a=e.i(46472),s=e.i(22658),r=e.i(86520),i=e.i(94325);let l=(0,i.default)("mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),n=(0,i.default)("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),d=(0,i.default)("tornado",[["path",{d:"M21 4H3",key:"1hwok0"}],["path",{d:"M18 8H6",key:"41n648"}],["path",{d:"M19 12H9",key:"1g4lpz"}],["path",{d:"M16 16h-6",key:"1j5d54"}],["path",{d:"M11 20H9",key:"39obr8"}]]);var c=e.i(74182),o=e.i(22513);let u={wildfire:a.Flame,flood:s.Droplets,earthquake:r.Activity,mudslide:l,hurricane:n,tornado:d},m={wildfire:"bg-red-500/10 text-red-600 dark:text-red-400",flood:"bg-blue-500/10 text-blue-600 dark:text-blue-400",earthquake:"bg-amber-500/10 text-amber-600 dark:text-amber-400",mudslide:"bg-orange-500/10 text-orange-600 dark:text-orange-400",hurricane:"bg-purple-500/10 text-purple-600 dark:text-purple-400",tornado:"bg-gray-500/10 text-gray-600 dark:text-gray-400"};function x({type:e,className:a,size:s="md"}){let r=u[e]||c.AlertTriangle,i=m[e]||"bg-muted text-muted-foreground";return(0,t.jsx)("div",{className:(0,o.cn)("flex items-center justify-center rounded-lg",{sm:"h-7 w-7",md:"h-9 w-9",lg:"h-12 w-12"}[s],i,a),children:(0,t.jsx)(r,{className:{sm:"h-3.5 w-3.5",md:"h-4 w-4",lg:"h-6 w-6"}[s]})})}e.s(["IncidentTypeIcon",()=>x],25933)},45003,e=>{"use strict";var t=e.i(59834),a=e.i(42650),s=e.i(42656),r=e.i(12061),i=e.i(17896),l=e.i(52815),n=e.i(36740),d=e.i(15357),c=e.i(25933),o=e.i(65241),u=e.i(12618),m=e.i(31906),x=e.i(93749),h=e.i(79001),p=e.i(71908),f=e.i(44261),g=e.i(31404),v=e.i(48846),j=e.i(50875),y=e.i(43970),b=e.i(83685),N=e.i(75482),k=e.i(45388),w=e.i(69833),C=e.i(1057),S=e.i(33217);function M(){let e=(0,a.useParams)().id,{data:M,isLoading:A,error:T}=(0,r.useIncident)(e),[z,D]=(0,s.useState)(1),[I,P]=(0,s.useState)("all"),[H,L]=(0,s.useState)(null),[B,V]=(0,s.useState)(null),{data:q,isLoading:R}=(0,r.useAffectedParcels)({incidentId:e,page:z,damageLevel:"all"!==I?I:void 0});if(A)return(0,t.jsx)(x.DetailSkeleton,{});if(T||!M)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(b.AlertCircle,{className:"h-8 w-8 text-destructive mb-4"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Incident not found"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"The requested incident could not be loaded."})]});let K=[{accessorKey:"apn",header:"APN",cell:({row:e})=>(0,t.jsx)(S.default,{href:`/parcels/${e.original.parcelId}`,className:"font-mono text-sm font-medium text-primary hover:underline",children:e.getValue("apn")})},{accessorKey:"primaryAddress",header:"Address",cell:({row:e})=>(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.getValue("primaryAddress")||"—"})},{accessorKey:"damageLevel",header:"Damage",cell:({row:e})=>{let a=e.getValue("damageLevel");return a?(0,t.jsx)(l.DamageBadge,{level:a}):(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}},{accessorKey:"surveyStatus",header:"Survey",cell:({row:e})=>(0,t.jsx)(p.Badge,{variant:"outline",className:"text-xs capitalize",children:e.getValue("surveyStatus")?.replace(/_/g," ")||"pending"})},{accessorKey:"reassessmentStatus",header:"Reassessment",cell:({row:e})=>(0,t.jsx)(p.Badge,{variant:"outline",className:"text-xs capitalize",children:e.getValue("reassessmentStatus")?.replace(/_/g," ")||"pending"})},{id:"actions",header:"Actions",cell:({row:e})=>{let a=e.original;return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:e=>{e.stopPropagation(),L(a)},children:[(0,t.jsx)(w.FileSearch,{className:"h-3.5 w-3.5 mr-1"}),"Survey"]}),(0,t.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:e=>{e.stopPropagation(),V(a)},children:[(0,t.jsx)(C.Calculator,{className:"h-3.5 w-3.5 mr-1"}),"Reassess"]})]})}}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(S.default,{href:"/calamity",children:(0,t.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground -ml-2",children:[(0,t.jsx)(y.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Calamity"]})}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(c.IncidentTypeIcon,{type:M.incidentType,size:"lg"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:M.name}),(0,t.jsx)(i.StatusBadge,{status:M.status})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:j.incidentTypeLabels[M.incidentType]||M.incidentType})]})]})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsx)(h.Card,{className:"shadow-sm",children:(0,t.jsxs)(h.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(k.Calendar,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start Date"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:(0,v.formatDate)(M.startDate)})]})]})}),(0,t.jsx)(h.Card,{className:"shadow-sm",children:(0,t.jsxs)(h.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(k.Calendar,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"End Date"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:M.endDate?(0,v.formatDate)(M.endDate):"Ongoing"})]})]})}),(0,t.jsx)(h.Card,{className:"shadow-sm",children:(0,t.jsxs)(h.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(N.MapPin,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Affected Parcels"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:M.affectedParcelCount||0})]})]})})]}),M.description&&(0,t.jsx)(h.Card,{className:"shadow-sm",children:(0,t.jsx)(h.CardContent,{className:"p-4",children:(0,t.jsx)("p",{className:"text-sm",children:M.description})})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Affected Parcels"}),(0,t.jsxs)(g.Select,{value:I,onValueChange:e=>{P(e),D(1)},children:[(0,t.jsx)(g.SelectTrigger,{className:"h-9 w-[160px]",children:(0,t.jsx)(g.SelectValue,{placeholder:"Damage Level"})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"all",children:"All Levels"}),(0,t.jsx)(g.SelectItem,{value:"destroyed",children:"Destroyed"}),(0,t.jsx)(g.SelectItem,{value:"major",children:"Major"}),(0,t.jsx)(g.SelectItem,{value:"minor",children:"Minor"}),(0,t.jsx)(g.SelectItem,{value:"affected",children:"Affected"}),(0,t.jsx)(g.SelectItem,{value:"none",children:"None"})]})]})]}),(0,t.jsx)(n.DataTable,{columns:K,data:q?.data||[],isLoading:R,emptyState:(0,t.jsx)(m.EmptyState,{icon:N.MapPin,title:"No affected parcels",description:"No parcels have been linked to this incident yet."})}),q?.pagination&&(0,t.jsx)(d.DataTablePagination,{pagination:q.pagination,onPageChange:D})]}),H&&(0,t.jsx)(o.SurveyDialog,{open:!!H,onOpenChange:e=>!e&&L(null),incidentId:e,parcel:H}),B&&(0,t.jsx)(u.ReassessmentDialog,{open:!!B,onOpenChange:e=>!e&&V(null),incidentId:e,parcel:B})]})}e.s(["default",()=>M])}]);